var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},BaseObject=function(){function a(){}a.prototype.Cast=function(){return this};a.prototype.GetType=function(){if(Object.getPrototypeOf)return new ObjectType(Object.getPrototypeOf(this));try{return new ObjectType(this.__proto__.constructor)}catch(a){console.warn("This browser does not support dynamic prototype retrieval.");return undefined}};return a}(),HashableObject=function(b){__extends(a,b);function a(){b.call(this);this._objectHash=a._instanceCount++}a.prototype.GetHashCode=function(){return this._objectHash};a._instanceCount=0;return a}(BaseObject),ObjectType=function(){function a(a){this.objPrototype=a}Object.defineProperty(a.prototype,"Name",{"get":function(){return""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"ModuleName",{"get":function(){return""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"FullName",{"get":function(){return""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"IsAbstract",{"get":function(){return false},enumerable:true,configurable:true});a.prototype.GetOwnProperties=function(){return Object.getOwnPropertyNames(this.objPrototype)};a.prototype.GetProperties=function(){return[]};a.prototype.GetMethods=function(){return[]};return a}(),Exception=function(){function a(a){this.name="Exception";this.message="No message given.";if(a!==undefined)this.message=a}a.IgnoreOrDefault=function(e,c,d){for(var b=[],a=0;a<arguments.length-3;a++)b[a]=arguments[a+3];try{var b=[].concat(arguments).splice(2);return c.apply(e,b)}catch(f){return d}};a.IgnoreAll=function(d,c){for(var b=[],a=0;a<arguments.length-2;a++)b[a]=arguments[a+2];try{var b=[].concat(arguments).splice(2);c.apply(d,b)}catch(e){}};a.Ignore=function(a){try{a()}catch(b){}};return a}();Exception.prototype=Error;var RuntimeException=function(b){__extends(a,b);function a(a){b.call(this,a);this.name="RuntimeException";this.message="No message given."}a.prototype.toString=function(){return'Exception "'+this.name+'" occurred with message; '+this.message};return a}(Exception),NotImplementedException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="NotImplementedException"}return a}(RuntimeException),AbstractMethodException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="AbstractMethodException";this.message="This method is an abstract stub. (As typescript does not support the abstract keyword). Please make sure this method is implemented if you get this exception."}return a}(NotImplementedException),MethodNotOverwrittenException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="MethodNotOverwrittenException";this.message="This method's prototype should have been overwritten with the correct function, however, somehow it wasn't"}return a}(RuntimeException),MethodNotAccessibleException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="MethodNotAccessibleException"}return a}(RuntimeException),NullReferenceException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="NullReferenceException"}return a}(RuntimeException),KeyNotFoundException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="KeyNotFoundException";this.message="The key you gave was not found in this collection."}return a}(RuntimeException),IndexOutOfBoundsException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="IndexOutOfBoundsException";this.message="The index given was less than 0 or larger than the length of this collection."}return a}(RuntimeException),DuplicateKeyException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="DuplicateKeyException";this.message="The key you wanted to add already exists on this collection."}return a}(RuntimeException),InvalidArgumentException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="InvalidArgumentException";this.message="The argument given to this method was invalid."}return a}(RuntimeException),Guid=function(b){__extends(a,b);function a(a){b.call(this);this._guid=a}a.prototype.CompareTo=function(a){if(a.toString()==this._guid)return 0;if(a.toString()>this._guid)return 1;if(a.toString()<this._guid)return-1;throw new Error("Error during comparing, this JS engine really sucks.");};a.prototype.toString=function(){return this._guid};a.NewGuid=function(){return new a("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=Math.random()*16|0,c=b=="x"?a:a&3|8;return c.toString(16)}))};return a}(BaseObject),TemplateFactory=function(){function a(){}a.WithTemplate=function(b,c){if(a.Templates[b]!==undefined)return c(a.Templates[b]);jQuery.ajax(a.ViewBasePath+b+".html",{async:true,dataType:"text",success:function(d){a.Templates[b]=_.template(d);c(a.Templates[b])},error:function(c,a,b){return console.error("Unable to retrieve the template; ",a,b)}})};a.GetTemplate=function(b){if(a.Templates[b]!==undefined)return a.Templates[b];var c="";jQuery.ajax(a.ViewBasePath+b+".html",{async:false,dataType:"text",success:function(a){c=a}});return _.template(c)};a.ViewBasePath="views/";a.Templates={};return a}(),Collections;(function(b){var a=function(){function a(a){this.Index=0;if(a==undefined||a==null)throw new InvalidArgumentException;this.Items=a}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.Items[this.Index]},enumerable:true,configurable:true});a.prototype.MoveNext=function(){if(!this.HasNext())return false;this.Index++;return true};a.prototype.HasNext=function(){return this.Index+1<this.Items.length};a.prototype.IsValid=function(){return this.Index<this.Items.length};a.prototype.Reset=function(){this.Index=0};return a}();b.SimpleEnumerator=a})(Collections||(Collections={}));var Collections;(function(a){var c=function(){function c(){}c.prototype.Each=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return;do b(a.Current);while(a.MoveNext())};c.prototype.BreakableEach=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return;do b(a.Current,a);while(a.MoveNext())};c.prototype.Any=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return false;do if(b(a.Current))return true;while(a.MoveNext());return false};c.prototype.All=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return true;do if(!b(a.Current))return false;while(a.MoveNext());return true};c.prototype.ContainsDeep=function(c,b){var a=this.GetEnumerator();if(a.Current==undefined)return false;do if(b(a.Current)==c)return true;while(a.MoveNext());return false};c.prototype.Where=function(d){var b=this.GetEnumerator(),c=new a.List;if(b.Current==undefined)return c;do d(b.Current)&&c.Add(b.Current);while(b.MoveNext());return c};c.prototype.Select=function(d){var b=this.GetEnumerator(),c=new a.List;if(b.Current==undefined)return c;do c.Add(d(b.Current));while(b.MoveNext());return c};c.prototype.GroupBy=function(g,f){var c=this.GetEnumerator(),b=new a.Dictionary;if(c.Current==undefined)return new a.List;do{var d=g(c.Current);if(b.ContainsKey(d)){var h=new a.List;b.Set(d,h)}else b.Get(d).Add(c.Current)}while(c.MoveNext());var e=new a.List;b.Each(function(a){return e.Add(f(a.Key,a.Value))});return e};c.prototype.Distinct=function(){var c=this.GetEnumerator(),b=new a.List;if(c.Current==undefined)return b;do!b.Contains(c.Current)&&b.Add(c.Current);while(c.MoveNext());return b};c.prototype.Except=function(d){var b=this.GetEnumerator(),c=new a.List;if(b.Current==undefined)return c;do!d.Contains(b.Current)&&c.Add(b.Current);while(b.MoveNext());return c};c.prototype.First=function(b){var a=this.GetEnumerator();if(b==undefined)return a.Current;else do if(b(a.Current))return a.Current;while(a.MoveNext());return null};c.prototype.FirstOrDefault=function(c,b){var a=this.GetEnumerator();if(b==undefined)return a.Current;else do if(b(a.Current))return a.Current;while(a.MoveNext());return c};c.prototype.Last=function(c){var a=this.GetEnumerator();if(c==undefined){var b=null;do b=a.Current;while(a.MoveNext());return b}else{var b=null;do if(c(a.Current))b=a.Current;while(a.MoveNext());return b}};c.prototype.LastOrDefault=function(d,c){var a=this.GetEnumerator();if(c==undefined){var b=d;do b=a.Current;while(a.MoveNext());return b}else{var b=d;do if(c(a.Current))b=a.Current;while(a.MoveNext());return b}};c.prototype.ElementAt=function(c){var a=this.GetEnumerator();if(a.Current==undefined)return null;var b=0;do{if(c==b)return a.Current;b++}while(a.MoveNext());return null};c.prototype.ElementAtOrDefault=function(b){var a=this.ElementAt(b);if(a==null)throw new Error("Index is invalid.");return a};c.prototype.IndexOfFirst=function(c){var a=this.GetEnumerator();if(a.Current==undefined)return-1;var b=0;do{if(c(a.Current))return b;b++}while(a.MoveNext());return-1};c.prototype.Min=function(b){var a=this.GetEnumerator();if(b==undefined)if(typeof a.Current=="number"){var e=a.Current;while(a.MoveNext())if(e>a.Current)e=a.Current}else throw new Error("Invalid type given, expected number. Please extract the correct value.");else{if(a.Current==undefined)return null;var d=a.Current,c=b(a.Current);while(a.MoveNext()){var f=b(a.Current);if(c>f){c=f;d=a.Current}}return d}};c.prototype.Max=function(b){var a=this.GetEnumerator();if(b==undefined)if(typeof a.Current=="number"){var e=a.Current;while(a.MoveNext())if(e<a.Current)e=a.Current}else throw new Error("Invalid type given, expected number. Please extract the correct value.");else{if(a.Current==undefined)return null;var d=a.Current,c=b(a.Current);while(a.MoveNext()){var f=b(a.Current);if(c<f){c=f;d=a.Current}}return d}};c.prototype.CountAll=function(d){var c=this.GetEnumerator();if(d==undefined)if(this instanceof b)return this.Count;else{var a=0;do a++;while(c.MoveNext());return a}else{var a=0;do if(d(c.Current))a++;while(c.MoveNext());return a}};c.prototype.ToList=function(){var b=this.GetEnumerator(),c=new a.List;do c.Add(b.Current);while(b.MoveNext());return c};c.prototype.ToArray=function(){var b=this.GetEnumerator(),a=[];while(b.MoveNext())a[a.length]=b.Current;return a};c.prototype.ToDictionary=function(e,d,b){var c=this.GetEnumerator();if(b==undefined)var b=new a.Dictionary;while(c.MoveNext())b.Set(e(c.Current),d(c.Current));return b};c.CopyToArray=function(a){return this.EnumerateToArray(a.GetEnumerator())};c.EnumerateToArray=function(a){var b=[];if(!a.IsValid())return b;do b.push(a.Current);while(a.MoveNext());return b};c.prototype.GetEnumerator=function(){throw new Error("This method is abstract, and should therefore be overridden by the extending class.");};return c}();a.Enumerable=c;var b=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype.Add=function(){throw new NotImplementedException;};a.prototype.Clear=function(){throw new NotImplementedException;};a.prototype.Contains=function(){throw new NotImplementedException;};a.prototype.Remove=function(){throw new NotImplementedException;};a.prototype.CopyTo=function(){throw new NotImplementedException;};a.prototype.GetNative=function(){throw new NotImplementedException;};a.prototype.RemoveAll=function(c){var a=this.GetEnumerator(),b=0;if(!a.IsValid())return b;do if(c(a.Current)){this.Remove(a.Current);b++}while(a.MoveNext());return b};a.prototype.RemoveFirst=function(b){var a=this.GetEnumerator();if(!a.IsValid())return;do if(b(a.Current)){this.Remove(a.Current);return}while(a.MoveNext())};return a}(c);a.Collection=b})(Collections||(Collections={}));var Collections;(function(a){var e=function(a){__extends(b,a);function b(b,c){a.call(this);this.Value1=b;this.Value2=c}return b}(BaseObject);a.Pair=e;var d=function(a){__extends(b,a);function b(b,c,d){a.call(this);this.Value1=b;this.Value2=c;this.Value3=d}return b}(BaseObject);a.Tuple=d;var b=function(b){__extends(a,b);function a(a,c,d,e){b.call(this);this.Value1=a;this.Value2=c;this.Value3=d;this.Value4=e}return a}(BaseObject);a.Quadruple=b;var c=function(b){__extends(a,b);function a(a,c,d,e,f){b.call(this);this.Value1=a;this.Value2=c;this.Value3=d;this.Value4=e;this.Value5=f}return a}(BaseObject);a.Pentuple=c})(Collections||(Collections={}));var Collections;(function(a){var b=function(){function b(){}b.GetEnumerator=function(b){if(b==undefined)throw new InvalidArgumentException;return new a.SimpleEnumerator(b)};return b}();a.ArrayHelper=b})(Collections||(Collections={}));var Collections;(function(a){var d=function(d){__extends(c,d);function c(){d.apply(this,arguments);this._length=0}Object.defineProperty(c.prototype,"Count",{"get":function(){return this._length},enumerable:true,configurable:true});c.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;this[this._length]=a;this._length++};c.prototype.AddRange=function(b){if(b===undefined)throw new InvalidArgumentException;var a=b.GetEnumerator();if(a.Current!=undefined)do this.Add(a.Current);while(a.MoveNext())};c.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;for(var b=0,a=0;a<this._length;a++)if(c==this[a]){delete this[a];b++}if(b>0)this._fixIndex();else throw new KeyNotFoundException;};c.prototype.Clear=function(){for(var a=0;a<this._length;a++)delete this[a];this._length=0};c.prototype.Contains=function(b){for(var a=0;a<this._length;a++)if(b==this[a])return true;return false};c.prototype.IndexOf=function(b){if(b===undefined)throw new InvalidArgumentException;for(var a=0;a<this._length;a++)if(b==this[a])return a;return-1};c.prototype.ElementAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this._length)throw new IndexOutOfBoundsException;return this[a]};c.prototype.Insert=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>this._length)throw new IndexOutOfBoundsException;this._makeGap(a,1);this[a]=b};c.prototype.InsertRange=function(b,e){if(b===undefined||e==undefined)throw new InvalidArgumentException;if(b<0||b>this._length)throw new IndexOutOfBoundsException;var d=a.Enumerable.CopyToArray(e);this._makeGap(b,d.length);for(var c=0;c<d.length;c++)this[c]=d[c]};c.prototype.RemoveAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this._length)throw new IndexOutOfBoundsException;delete this[a];this._fixIndex()};c.prototype.RemoveRange=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>=this._length||(b<0||b>this._length-a))throw new IndexOutOfBoundsException;for(var c=0;c<b;c++)delete this[a+c];this._fixIndex()};c.prototype.CopyTo=function(b){for(var a=0;a<this._length;a++)b.Add(this[a])};c.prototype.GetEnumerator=function(){return new b(this)};c.prototype.GetNative=function(){return this};c.prototype._fixIndex=function(){for(var c=0,b=-1,e=this._length,a=0;a<e;a++)if(this[a]===undefined&&this[a+1]===undefined)if(b>=0)continue;else b=a;else if(b>=0&&this[a]!==undefined){var d=this._removeGap(b,a-1);c+=d;e-=d;b=-1}else if(b==-1&&this[a]===undefined){var d=this._removeGap(a,a);e-=d;c+=d}if(b>-1)c+=this._length-b;this._length-=c};c.prototype._removeGap=function(c,e){for(var d=e-c+1,f=1,a=c;a<this._length;a++){this[a]=this[e+f];f++}for(var b=this._length-d;b<this._length;b++)delete this[b];return d};c.prototype._makeGap=function(b,c){for(var d={},a=0;a<this._length-b;a++){d[a]=this[b+a];delete this[b+a]}for(var a=0;a<this._length-b;a++)this[b+c+a]=d[a];this._length+=c};return c}(a.Collection);a.List=d;var b=function(){function a(a){this.Index=0;if(a==undefined||a==null)throw new InvalidArgumentException;this.List=a}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.List[this.Index]},enumerable:true,configurable:true});a.prototype.MoveNext=function(){if(!this.HasNext())return false;this.Index++;return true};a.prototype.HasNext=function(){return this.Index+1<this.List.Count};a.prototype.IsValid=function(){return this.Index<this.List.Count};a.prototype.Reset=function(){this.Index=0};return a}();a.ListEnumerator=b;var c=function(c){__extends(b,c);function b(){c.apply(this,arguments);this.Items=[]}Object.defineProperty(b.prototype,"Count",{"get":function(){return this.Items.length},enumerable:true,configurable:true});b.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;this.Items.push(a)};b.prototype.AddRange=function(b){if(b===undefined)throw new InvalidArgumentException;this.Items=this.Items.concat(a.Enumerable.CopyToArray(b))};b.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;for(var b=false,a=0;a<this.Items.length;a++)if(c==this.Items[a]){this.Items.splice(a,1);b=true}if(!b)throw new KeyNotFoundException;};b.prototype.RemoveRange=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>=this.Items.length||(b<0||b>this.Items.length-a))throw new IndexOutOfBoundsException;this.Items.splice(a,b)};b.prototype.Clear=function(){this.Items=[]};b.prototype.Contains=function(a){return this.Items.indexOf(a)>=0};b.prototype.IndexOf=function(a){if(a===undefined)throw new InvalidArgumentException;return this.Items.indexOf(a)};b.prototype.ElementAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this.Items.length)throw new IndexOutOfBoundsException;return this.Items[a]};b.prototype.Insert=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>this.Items.length)throw new IndexOutOfBoundsException;this.Items.splice(a,0,b)};b.prototype.InsertRange=function(b,c){if(b===undefined||c==undefined)throw new InvalidArgumentException;if(b<0||b>this.Items.length)throw new IndexOutOfBoundsException;var e=this.Items.slice(b),d=this.Items;this.Items=d.concat(a.Enumerable.CopyToArray(c)).concat(e)};b.prototype.RemoveAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this.Items.length)throw new IndexOutOfBoundsException;this.Items.splice(a,1)};b.prototype.CopyTo=function(b){for(var a=0;a<this.Items.length;a++)b.Add(this.Items[a])};b.prototype.GetEnumerator=function(){return new a.SimpleEnumerator(this.Items)};b.prototype.GetNative=function(){return this.Items};return b}(a.Collection);a.ArrayList=c})(Collections||(Collections={}));var Collections;(function(a){var g=function(c){__extends(a,c);function a(){c.apply(this,arguments);this.Items=[]}Object.defineProperty(a.prototype,"Count",{"get":function(){return this.Items.length},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Keys",{"get":function(){var a=[],b=0,c=this.Items.length;while(b<c)a[a.length]=this.Items[b].Key;return a},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Values",{"get":function(){var a=[],b=0,c=this.Items.length;while(b<c)a[a.length]=this.Items[b].Value;return a},enumerable:true,configurable:true});a.prototype.Get=function(b){var a=0,c=this.Items.length;while(a<c)if(this.Items[a].Key==b)return this.Items[a].Value;return null};a.prototype.Set=function(d,c){var a=0,e=this.Items.length;while(a<e)if(this.Items[a].Key==d)this.Items[a].Value=c;this.Add(new b(d,c))};a.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;if(a==null){this.Items.push(new b(null,null));console.warn("It probably isn't smart to add Null values to a Dictionary. Maybe you'd want to change your application to check for those kinds of values?")}else this.Items.push(a)};a.prototype.GetKey=function(b){var a=0,c=this.Items.length;while(a<c)if(this.Items[a].Value==b)return this.Items[a].Key;return null};a.prototype.Clear=function(){this.Items=[]};a.prototype.Contains=function(b){for(var a=0;a<this.Items.length;a++)if(b==this.Items[a])return true;return false};a.prototype.ContainsKey=function(b){for(var a=0;a<this.Items.length;a++)if(b==this.Items[a].Key)return true;return false};a.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;var d=false;if(c instanceof b){for(var a=0;a<this.Items.length;a++)if(this.Items[a]==c){this.Items.splice(a,1);d=true}}else for(var a=0;a<this.Items.length;a++)if(this.Items[a].Key==c){this.Items.splice(a,1);d=true}if(!d)throw new KeyNotFoundException;};a.prototype.CopyTo=function(b){for(var a=0;a<this.Items.length;a++)b.Add(this.Items[a])};a.prototype.GetNative=function(){return this.Items};a.prototype.GetEnumerator=function(){return new e(this.Items)};return a}(a.Collection);a.Dictionary=g;var f=function(c){__extends(a,c);function a(){c.apply(this,arguments);this._count=0;this.Items={}}Object.defineProperty(a.prototype,"Count",{"get":function(){return this._count},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Keys",{"get":function(){return this.Items.Keys()},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Values",{"get":function(){return _.values(this.Items)},enumerable:true,configurable:true});a.prototype.Get=function(a){return this.Items[a]};a.prototype.Set=function(a,b){if(this.Items[a]===undefined){this.Items[a]=b;this._count++}else this.Items[a]=b};a.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;if(a==null)console.warn("It probably isn't smart to add Null values to a Dictionary. Maybe you'd want to change your application to check for those kinds of values?");else this.Items[a.Key]=a.Value;this._count++};a.prototype.GetKey=function(b){for(var a in this.Items)if(this.Items[a]==b)return a};a.prototype.Clear=function(){this.Items={};this._count=0};a.prototype.Contains=function(a){for(var b in this.Items)if(b==a.Key&&this.Items[b]==a.Value)return true;return false};a.prototype.ContainsKey=function(a){return a in this.Items};a.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;var d=false;if(c instanceof b){for(var a in this.Items)if(a==c.Key&&this.Items[a]==c.Value){delete this.Items[a];this._count--;d=true}}else for(var a in this.Items)if(this.Items[a]==c){delete this.Items[a];this._count--;d=true}if(!d)throw new KeyNotFoundException;};a.prototype.CopyTo=function(c){for(var a in this.Items)c.Add(new b(a,this.Items[a]))};a.prototype.GetNative=function(){return this.Items};a.prototype.GetEnumerator=function(){return new d(this.Items)};return a}(a.Collection);a.SearchDictionary=f;var b=function(){function a(b,a){this.Key=b;this.Value=a}return a}();a.KeyValuePair=b;var c=function(){function a(){this._index=0}Object.defineProperty(a.prototype,"Index",{"get":function(){return this._index},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Current",{"get":function(){throw new AbstractMethodException;},enumerable:true,configurable:true});a.prototype.HasNext=function(){throw new AbstractMethodException;};a.prototype.IsValid=function(){throw new AbstractMethodException;};a.prototype.MoveNext=function(){if(!this.HasNext())return false;this._index++;this.RefreshCurrent();return true};a.prototype.Reset=function(){this._index=0;this.RefreshCurrent()};a.prototype.RefreshCurrent=function(){throw new AbstractMethodException;};return a}();a.BaseDictionaryEnumerator=c;var e=function(b){__extends(a,b);function a(a){b.call(this);if(a==undefined||a==null)throw new InvalidArgumentException;this.Items=a;this.RefreshCurrent()}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.Items[this.Index]},enumerable:true,configurable:true});a.prototype.HasNext=function(){return this.Index+1<this.Items.length};a.prototype.IsValid=function(){return this.Index<this.Items.length};a.prototype.RefreshCurrent=function(){if(this.Items.length>0){this.Key=this.Current.Key;this.Value=this.Current.Value}};return a}(c);a.DictionaryEnumerator=e;var d=function(c){__extends(a,c);function a(a){c.call(this);if(a==undefined||a==null)throw new InvalidArgumentException;this.Items=a;this.Keys=_.keys(this.Items);this.RefreshCurrent()}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.Keys.length>0?new b(this.Key,this.Value):undefined},enumerable:true,configurable:true});a.prototype.HasNext=function(){return!(this.Keys[this.Index+1]==undefined)};a.prototype.IsValid=function(){return!(this.Keys[this.Index]==undefined)};a.prototype.RefreshCurrent=function(){if(this.Keys.length>0){this.Key=this.Keys[this.Index];this.Value=this.Items[this.Keys[this.Index]]}};return a}(c);a.SearchDictionaryEnumerator=d})(Collections||(Collections={}));var Panels;(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this._panelId=-1;this._panelName=null;this._panelId=a._panelCnt++;this._panelElement=jQuery('<div class="view-panel" id="'+this.PanelName+'">');this._contentElement=this._panelElement}Object.defineProperty(a.prototype,"PanelName",{"get":function(){return this._panelName?this._panelName:"panel"+this._panelId},"set":function(a){this._panelName=a;this.PanelElement.attr("id",a)},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PanelSeqId",{"get":function(){return this._panelId},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PanelElement",{"get":function(){return this._panelElement},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"ContentElement",{"get":function(){return this._contentElement},enumerable:true,configurable:true});a.prototype.Render=function(){this.Renderer()};a.prototype.Renderer=function(){throw new AbstractMethodException;};a.prototype.withTemplate=function(b,a){TemplateFactory.WithTemplate(b,a.bind(this))};a.prototype.GetTemplate=function(a){return TemplateFactory.GetTemplate(a)};a._panelCnt=0;return a}(BaseObject);a.Panel=b})(Panels||(Panels={}));var Panels;(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.Panels={};this.PanelElement.addClass("view-panel-group")}a.prototype.AddPanel=function(a){this.Panels[a.PanelName]=a;this.ContentElement.append(a.PanelElement)};a.prototype.GetPanel=function(a){if(this.Panels[a]===undefined)throw new UnknownPanelException;return this.Panels[a]};a.prototype.GetTypedPanel=function(a){return this.GetPanel(a)};a.prototype.GetPanelsByType=function(c){var a=[];for(var b in this.Panels)if(b instanceof c)a[a.length]=b;return a};a.prototype.HasPanel=function(a){return this.Panels[a]!==undefined};return a}(a.Panel);a.PanelGroup=b})(Panels||(Panels={}));var UnknownPanelException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="UnknownPanelException";this.message="The given panel is not registred with this group or by that name."}return a}(KeyNotFoundException),Panels;(function(a){(function(c){var b=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype.Show=function(a){_.each(this.Panels,function(b,c){if(c==a)b.PanelElement.show();else b.PanelElement.hide()})};b.prototype.Hide=function(a){_.each(this.Panels,function(c,b){b==a&&c.PanelElement.hide()})};b.prototype.Render=function(){};b.prototype.FillFromElement=function(d,c){a.LiftablePanelHelper.ReplacePanelElements(this,d);for(var b=0;b<c.length;b++)this.AddPanel(c[b].Panel)};return b}(a.PanelGroup);c.StackingPanelGroup=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}));var Panels;(function(a){var c=function(c){__extends(a,c);function a(d,a){c.call(this);b.ReplacePanelElements(this,d,a)}a.prototype.Renderer=function(){};a.prototype.FillFromElement=function(c,a){b.ReplacePanelElements(this,c,a)};return a}(a.Panel);a.LiftedPanel=c;(function(a){a[a.NotLiftable=0]="NotLiftable";a[a.Panel=1]="Panel";a[a.Group=2]="Group"})(a.LiftableElementState||(a.LiftableElementState={}));var d=a.LiftableElementState,b=function(){function b(){}b.LiftPanelFromElement=function(c){if(!c.length||c.length>1)throw new InvalidArgumentException("Expected a jQuery object with just 1 element, got more or none.");var e=c.attr(this.DataPanelType);if(e===undefined)throw new InvalidArgumentException("Expected an element with a DataGroupType tag, but the given element did not have any.");var a=c.detach(),f=this.ExtractContentElement(a),d=this.ExtractPanelConfig(a),b=a.attr("id");if(b===null||b=="")b=undefined;return{Panel:this.LiftedPanelConstructor(a,f,b,e,d.Value1),GroupConfig:d.Value2}};b.LiftPanelGroupFromElement=function(c){if(!c.length||c.length>1)throw new InvalidArgumentException("Expected a jQuery object with just 1 element, got more or none.");var g=c.attr(this.DataGroupType);if(g===undefined)throw new InvalidArgumentException("Expected an element with a DataGroupType tag, but the given element did not have any.");var a=c.detach(),d=this.ExtractContentElement(a),f=this.ExtractPanelConfig(a),b=a.attr("id");if(b===null||b=="")b=undefined;var e;if(d!=undefined)e=this.LiftAllWithPanelDataFromElement(d);else e=this.LiftAllWithPanelDataFromElement(a);return{Panel:this.LiftedGroupConstructor(a,d,b,g,f.Value1,e),GroupConfig:f.Value2}};b.LiftAllFromElement=function(c){var b=this,a=[];c.each(function(d,c){jQuery(c).children().each(function(f,d){var c=jQuery(d),e=b.IsLiftableElement(c);switch(e){case 1:a.push(b.LiftPanelFromElement(c).Panel);break;case 2:a.push(b.LiftPanelGroupFromElement(c).Panel);break;case 0:a.concat(b.LiftAllFromElement(c))}})});return a};b.LiftAllWithPanelDataFromElement=function(c){var b=this,a=[];c.each(function(d,c){jQuery(c).children().each(function(f,d){var c=jQuery(d),e=b.IsLiftableElement(c);switch(e){case 1:a.push(b.LiftPanelFromElement(c));break;case 2:a.push(b.LiftPanelGroupFromElement(c));break;case 0:a.concat(b.LiftAllWithPanelDataFromElement(c))}})});return a};b.IsLiftableElement=function(a){return a.attr(this.DataPanelType)!=undefined?1:a.attr(this.DataGroupType)!=undefined?2:0};b.ExtractPanelConfig=function(e){var d=e.attr(this.DataPanelConfig),b;if(d!=undefined&&d.length>0)b=JSON.parse(d);else b=[];var c=e.attr(this.DataGroupConfig),a;if(c!=undefined&&c.length>0)a=JSON.parse(c);else a=[];return new Collections.Pair(b,a)};b.ExtractContentElement=function(b){var a=b.find("["+this.DataElementRole+"=content]");return a.length==0?undefined:a.first()};b.LiftTypedPanelFromElement=function(a){return this.LiftPanelFromElement(a)};b.LiftedPanelConstructor=function(f,e,d,a,c){if(a!=undefined&&a.length>0){var b=this.GetPanelObjectByString(a);if(b==null){console.error('Undefined panel type set in element attribute. Given type "'+a+'" was not found and could not be instantiated.');return this._setPanelName(this.DefaultPanelConstructor(f,e,c),d)}else return this._setPanelName(new(b.bind.apply(b,[b].concat(c))),d)}else return this._setPanelName(this.DefaultPanelConstructor(f,e,c),d)};b.LiftedGroupConstructor=function(d,g,f,b,e,a){if(typeof a==="undefined")a=[];if(b!=undefined&&b.length>0){var c=this.GetGroupObjectByString(b);if(c==null){console.error('Undefined panel type set in element attribute. Given type "'+b+'" was not found and could not be instantiated.');return this._setPanelName(this.DefaultPanelGroupConstructor(d,g,e,a),f)}else{var h=this._setPanelName(new(c.bind.apply(c,[c].concat(e))),f);h.FillFromElement(d,a);return h}}else return this._setPanelName(this.DefaultPanelGroupConstructor(d,g,e,a),f)};b._setPanelName=function(b,a){if(a!=undefined)b.PanelName=a;return b};b.ReplacePanelElements=function(f,d,c){var a=f;if(d!=undefined){d.attr("id",a._panelElement.attr("id"));for(var e=a._panelElement.attr("class").split(" "),b=0;b<e.length;b++)d.addClass(e[b]);a._panelElement=d}if(c!=undefined&&d!=c)if(a._panelElement==a._contentElement)a._contentElement=c;else{for(var e=a._contentElement.attr("class").split(" "),b=0;b<e.length;b++)c.addClass(e[b]);a._contentElement=c}};b.IsLiftablePanel=function(a){return a==undefined?false:typeof a=="function"?typeof a.prototype.FillFromElement=="function":typeof a.FillFromElement=="function"};b.GetPanelObjectByString=function(c){var b;if(c.indexOf(".")>-1)b=this.ResolveObjectForPath(c);else b=a[c];return this.IsLiftablePanel(b)?b:null};b.GetGroupObjectByString=function(c){var b;if(c.indexOf(".")>-1)b=this.ResolveObjectForPath(c);else b=a.Groups[c];return this.IsLiftablePanel(b)?b:null};b.ResolveObjectForPath=function(d){try{for(var c=d.split("."),a=window,b=0;b<c.length;b++)a=a[c[b]];return a}catch(e){return undefined}};b.DataElementRole="data-element-role";b.DataPanelType="data-panel-type";b.DataGroupType="data-group-type";b.DataPanelConfig="data-panel-config";b.DataGroupConfig="data-group-config";b.DefaultPanelConstructor=function(b,a){return new c(b,a)};b.DefaultPanelGroupConstructor=function(c,e,d){var b=new a.Groups.StackingPanelGroup;b.FillFromElement(c,d);return b};return b}();a.LiftablePanelHelper=b})(Panels||(Panels={}));var Panels;(function(b){var a=function(b){__extends(a,b);function a(c,a){b.call(this);this._panel=c;this._group=a}Object.defineProperty(a.prototype,"PanelName",{"get":function(){return this._panel.PanelName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"QueryString",{"get":function(){return"#"+this.PanelName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"OuterElement",{"get":function(){return this._panel.PanelElement},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"InnerElement",{"get":function(){return this._panel.ContentElement},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Visibility",{"get":function(){return this._group.IsVisible(this.PanelName)},"set":function(a){if(a)this._group.Show(this.PanelName);else this._group.Hide(this.PanelName)},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Group",{"get":function(){return this._group},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Panel",{"get":function(){return this._panel},enumerable:true,configurable:true});a.prototype.toString=function(){return this.PanelName};a.prototype.Equals=function(a){if(a===undefined)throw new NullReferenceException;return a.PanelName==this.PanelName};a.prototype.GetHashCode=function(){return this._panel.PanelSeqId};return a}(BaseObject);b.PanelReference=a})(Panels||(Panels={}));var Panels;(function(a){(function(a){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Top=2]="Top";a[a.Down=3]="Down"})(a.Side||(a.Side={}));var c=a.Side;(function(a){a[a.Forward=0]="Forward";a[a.Backward=1]="Backward";a[a.Sidewards=2]="Sidewards"})(a.Direction||(a.Direction={}));var b=a.Direction})(a.Viewport||(a.Viewport={}));var b=a.Viewport})(Panels||(Panels={}));var Panels;(function(a){(function(c){var b=function(c){__extends(b,c);function b(){c.call(this);this.TabsListElement=jQuery("<ul>");this.PanelElement.append(this.TabsListElement);this.ContentElement=jQuery("<div>");this.PanelElement.append(this.ContentElement)}b.prototype.AddPanel=function(a){this.AddTab(a,a.PanelName)};b.prototype.AddTab=function(a){var b=this;c.prototype.AddPanel.call(this,a);this.TabsListElement.append(jQuery('<li data-panelid="'+a.PanelSeqId+'">'+a.PanelName+"</li>").click(function(){return b.Show(a.PanelName)}))};b.prototype.SetLabel=function(a,b){this.FindTabByName(a).text(b)};b.prototype.Show=function(a){c.prototype.Show.call(this,a);this.TabsListElement.find("li.active").removeClass("active");this.FindTabByName(a).addClass("active")};b.prototype.FindTabByName=function(a){return this.TabsListElement.find("li[data-panelid="+this.Panels[a].PanelSeqId+"]")};b.prototype.Render=function(){_.each(this.Panels,function(a){a.Render()})};b.prototype.FillFromElement=function(g,f){var h=this;if(_.size(this.Panels)>0)throw new RuntimeException("Tried to fill this group after panels were already added manually. This group does not support that.");a.LiftablePanelHelper.ReplacePanelElements(this,g);this.TabsListElement=g.find("ul");if(this.TabsListElement.length==0){console.log("No tab list found for lifting panel from DOM, proceeded to make a tablist ourselves.");this.TabsListElement=jQuery("<ul>");this.PanelElement.prepend(this.TabsListElement);for(var d=0;d<f.length;d++)this.AddPanel(f[d].Panel)}else for(var b=f[d].Panel,d=0;d<f.length;d++){c.prototype.AddPanel.call(this,b);var e=this.TabsListElement.find("li[data-panelid="+b.PanelSeqId+"]");if(e.length==0){e=this.TabsListElement.find("li[data-show-panel="+b.PanelName+"]");if(e.length==0){console.error('No tab found for panel with name "'+b.PanelName+'"!!');continue}else e.attr("data-panelid",b.PanelSeqId)}e.click(function(){return h.Show(b.PanelName)})}};return b}(a.Groups.StackingPanelGroup);c.TabbedPanelGroup=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}))