var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},BaseObject=function(){function a(){}a.prototype.Cast=function(){return this};a.prototype.GetType=function(){if(Object.getPrototypeOf)return new ObjectType(Object.getPrototypeOf(this));try{return new ObjectType(this.__proto__.constructor)}catch(a){console.warn("This browser does not support dynamic prototype retrieval.");return undefined}};return a}(),HashableObject=function(b){__extends(a,b);function a(){b.call(this);this._objectHash=a._instanceCount++}a.prototype.GetHashCode=function(){return this._objectHash};a._instanceCount=0;return a}(BaseObject),ObjectType=function(){function a(a){this.objPrototype=a}Object.defineProperty(a.prototype,"Name",{"get":function(){return""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"ModuleName",{"get":function(){return""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"FullName",{"get":function(){return""},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"IsAbstract",{"get":function(){return false},enumerable:true,configurable:true});a.prototype.GetOwnProperties=function(){return Object.getOwnPropertyNames(this.objPrototype)};a.prototype.GetProperties=function(){return[]};a.prototype.GetMethods=function(){return[]};return a}(),Exception=function(){function a(a){this.name="Exception";this.message="No message given.";if(a!==undefined)this.message=a}a.IgnoreOrDefault=function(e,c,d){for(var b=[],a=0;a<arguments.length-3;a++)b[a]=arguments[a+3];try{var b=[].concat(arguments).splice(2);return c.apply(e,b)}catch(f){return d}};a.IgnoreAll=function(d,c){for(var b=[],a=0;a<arguments.length-2;a++)b[a]=arguments[a+2];try{var b=[].concat(arguments).splice(2);c.apply(d,b)}catch(e){}};a.Ignore=function(a){try{a()}catch(b){}};return a}();Exception.prototype=Error;var RuntimeException=function(b){__extends(a,b);function a(a){b.call(this,a);this.name="RuntimeException";this.message="No message given."}a.prototype.toString=function(){return'Exception "'+this.name+'" occurred with message; '+this.message};return a}(Exception),NotImplementedException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="NotImplementedException"}return a}(RuntimeException),AbstractMethodException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="AbstractMethodException";this.message="This method is an abstract stub. (As typescript does not support the abstract keyword). Please make sure this method is implemented if you get this exception."}return a}(NotImplementedException),MethodNotOverwrittenException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="MethodNotOverwrittenException";this.message="This method's prototype should have been overwritten with the correct function, however, somehow it wasn't"}return a}(RuntimeException),MethodNotAccessibleException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="MethodNotAccessibleException"}return a}(RuntimeException),NullReferenceException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="NullReferenceException"}return a}(RuntimeException),KeyNotFoundException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="KeyNotFoundException";this.message="The key you gave was not found in this collection."}return a}(RuntimeException),IndexOutOfBoundsException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="IndexOutOfBoundsException";this.message="The index given was less than 0 or larger than the length of this collection."}return a}(RuntimeException),DuplicateKeyException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="DuplicateKeyException";this.message="The key you wanted to add already exists on this collection."}return a}(RuntimeException),InvalidArgumentException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="InvalidArgumentException";this.message="The argument given to this method was invalid."}return a}(RuntimeException),Guid=function(b){__extends(a,b);function a(a){b.call(this);this._guid=a}a.prototype.CompareTo=function(a){if(a.toString()==this._guid)return 0;if(a.toString()>this._guid)return 1;if(a.toString()<this._guid)return-1;throw new Error("Error during comparing, this JS engine really sucks.");};a.prototype.toString=function(){return this._guid};a.NewGuid=function(){return new a("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=Math.random()*16|0,c=b=="x"?a:a&3|8;return c.toString(16)}))};return a}(BaseObject),TemplateFactory=function(){function a(){}a.WithTemplate=function(b,c){if(a.Templates[b]!==undefined)return c(a.Templates[b]);jQuery.ajax(a.ViewBasePath+b+".html",{async:true,dataType:"text",success:function(d){a.Templates[b]=_.template(d);c(a.Templates[b])},error:function(c,a,b){return console.error("Unable to retrieve the template; ",a,b)}})};a.GetTemplate=function(b){if(a.Templates[b]!==undefined)return a.Templates[b];var c="";jQuery.ajax(a.ViewBasePath+b+".html",{async:false,dataType:"text",success:function(a){c=a}});return _.template(c)};a.ViewBasePath="views/";a.Templates={};return a}(),Collections;(function(b){var a=function(){function a(a){this.Index=0;if(a==undefined||a==null)throw new InvalidArgumentException;this.Items=a}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.Items[this.Index]},enumerable:true,configurable:true});a.prototype.MoveNext=function(){if(!this.HasNext())return false;this.Index++;return true};a.prototype.HasNext=function(){return this.Index+1<this.Items.length};a.prototype.IsValid=function(){return this.Index<this.Items.length};a.prototype.Reset=function(){this.Index=0};return a}();b.SimpleEnumerator=a})(Collections||(Collections={}));var Collections;(function(a){var c=function(){function c(){}c.prototype.Each=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return;do b(a.Current);while(a.MoveNext())};c.prototype.BreakableEach=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return;do b(a.Current,a);while(a.MoveNext())};c.prototype.Any=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return false;do if(b(a.Current))return true;while(a.MoveNext());return false};c.prototype.All=function(b){var a=this.GetEnumerator();if(a.Current==undefined)return true;do if(!b(a.Current))return false;while(a.MoveNext());return true};c.prototype.ContainsDeep=function(c,b){var a=this.GetEnumerator();if(a.Current==undefined)return false;do if(b(a.Current)==c)return true;while(a.MoveNext());return false};c.prototype.Where=function(d){var b=this.GetEnumerator(),c=new a.List;if(b.Current==undefined)return c;do d(b.Current)&&c.Add(b.Current);while(b.MoveNext());return c};c.prototype.Select=function(d){var b=this.GetEnumerator(),c=new a.List;if(b.Current==undefined)return c;do c.Add(d(b.Current));while(b.MoveNext());return c};c.prototype.GroupBy=function(g,f){var c=this.GetEnumerator(),b=new a.Dictionary;if(c.Current==undefined)return new a.List;do{var d=g(c.Current);if(b.ContainsKey(d)){var h=new a.List;b.Set(d,h)}else b.Get(d).Add(c.Current)}while(c.MoveNext());var e=new a.List;b.Each(function(a){return e.Add(f(a.Key,a.Value))});return e};c.prototype.Distinct=function(){var c=this.GetEnumerator(),b=new a.List;if(c.Current==undefined)return b;do!b.Contains(c.Current)&&b.Add(c.Current);while(c.MoveNext());return b};c.prototype.Except=function(d){var b=this.GetEnumerator(),c=new a.List;if(b.Current==undefined)return c;do!d.Contains(b.Current)&&c.Add(b.Current);while(b.MoveNext());return c};c.prototype.First=function(b){var a=this.GetEnumerator();if(b==undefined)return a.Current;else do if(b(a.Current))return a.Current;while(a.MoveNext());return null};c.prototype.FirstOrDefault=function(c,b){var a=this.GetEnumerator();if(b==undefined)return a.Current;else do if(b(a.Current))return a.Current;while(a.MoveNext());return c};c.prototype.Last=function(c){var a=this.GetEnumerator();if(c==undefined){var b=null;do b=a.Current;while(a.MoveNext());return b}else{var b=null;do if(c(a.Current))b=a.Current;while(a.MoveNext());return b}};c.prototype.LastOrDefault=function(d,c){var a=this.GetEnumerator();if(c==undefined){var b=d;do b=a.Current;while(a.MoveNext());return b}else{var b=d;do if(c(a.Current))b=a.Current;while(a.MoveNext());return b}};c.prototype.ElementAt=function(c){var a=this.GetEnumerator();if(a.Current==undefined)return null;var b=0;do{if(c==b)return a.Current;b++}while(a.MoveNext());return null};c.prototype.ElementAtOrDefault=function(b){var a=this.ElementAt(b);if(a==null)throw new Error("Index is invalid.");return a};c.prototype.IndexOfFirst=function(c){var a=this.GetEnumerator();if(a.Current==undefined)return-1;var b=0;do{if(c(a.Current))return b;b++}while(a.MoveNext());return-1};c.prototype.Min=function(b){var a=this.GetEnumerator();if(b==undefined)if(typeof a.Current=="number"){var e=a.Current;while(a.MoveNext())if(e>a.Current)e=a.Current}else throw new Error("Invalid type given, expected number. Please extract the correct value.");else{if(a.Current==undefined)return null;var d=a.Current,c=b(a.Current);while(a.MoveNext()){var f=b(a.Current);if(c>f){c=f;d=a.Current}}return d}};c.prototype.Max=function(b){var a=this.GetEnumerator();if(b==undefined)if(typeof a.Current=="number"){var e=a.Current;while(a.MoveNext())if(e<a.Current)e=a.Current}else throw new Error("Invalid type given, expected number. Please extract the correct value.");else{if(a.Current==undefined)return null;var d=a.Current,c=b(a.Current);while(a.MoveNext()){var f=b(a.Current);if(c<f){c=f;d=a.Current}}return d}};c.prototype.CountAll=function(d){var c=this.GetEnumerator();if(d==undefined)if(this instanceof b)return this.Count;else{var a=0;do a++;while(c.MoveNext());return a}else{var a=0;do if(d(c.Current))a++;while(c.MoveNext());return a}};c.prototype.ToList=function(){var b=this.GetEnumerator(),c=new a.List;do c.Add(b.Current);while(b.MoveNext());return c};c.prototype.ToArray=function(){var b=this.GetEnumerator(),a=[];while(b.MoveNext())a[a.length]=b.Current;return a};c.prototype.ToDictionary=function(e,d,b){var c=this.GetEnumerator();if(b==undefined)var b=new a.Dictionary;while(c.MoveNext())b.Set(e(c.Current),d(c.Current));return b};c.CopyToArray=function(a){return this.EnumerateToArray(a.GetEnumerator())};c.EnumerateToArray=function(a){var b=[];if(!a.IsValid())return b;do b.push(a.Current);while(a.MoveNext());return b};c.prototype.GetEnumerator=function(){throw new Error("This method is abstract, and should therefore be overridden by the extending class.");};return c}();a.Enumerable=c;var b=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype.Add=function(){throw new NotImplementedException;};a.prototype.Clear=function(){throw new NotImplementedException;};a.prototype.Contains=function(){throw new NotImplementedException;};a.prototype.Remove=function(){throw new NotImplementedException;};a.prototype.CopyTo=function(){throw new NotImplementedException;};a.prototype.GetNative=function(){throw new NotImplementedException;};a.prototype.RemoveAll=function(c){var a=this.GetEnumerator(),b=0;if(!a.IsValid())return b;do if(c(a.Current)){this.Remove(a.Current);b++}while(a.MoveNext());return b};a.prototype.RemoveFirst=function(b){var a=this.GetEnumerator();if(!a.IsValid())return;do if(b(a.Current)){this.Remove(a.Current);return}while(a.MoveNext())};return a}(c);a.Collection=b})(Collections||(Collections={}));var Collections;(function(a){var e=function(a){__extends(b,a);function b(b,c){a.call(this);this.Value1=b;this.Value2=c}return b}(BaseObject);a.Pair=e;var d=function(a){__extends(b,a);function b(b,c,d){a.call(this);this.Value1=b;this.Value2=c;this.Value3=d}return b}(BaseObject);a.Tuple=d;var b=function(b){__extends(a,b);function a(a,c,d,e){b.call(this);this.Value1=a;this.Value2=c;this.Value3=d;this.Value4=e}return a}(BaseObject);a.Quadruple=b;var c=function(b){__extends(a,b);function a(a,c,d,e,f){b.call(this);this.Value1=a;this.Value2=c;this.Value3=d;this.Value4=e;this.Value5=f}return a}(BaseObject);a.Pentuple=c})(Collections||(Collections={}));var Collections;(function(a){var b=function(){function b(){}b.GetEnumerator=function(b){if(b==undefined)throw new InvalidArgumentException;return new a.SimpleEnumerator(b)};return b}();a.ArrayHelper=b})(Collections||(Collections={}));var Collections;(function(a){var d=function(d){__extends(c,d);function c(){d.apply(this,arguments);this._length=0}Object.defineProperty(c.prototype,"Count",{"get":function(){return this._length},enumerable:true,configurable:true});c.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;this[this._length]=a;this._length++};c.prototype.AddRange=function(b){if(b===undefined)throw new InvalidArgumentException;var a=b.GetEnumerator();if(a.Current!=undefined)do this.Add(a.Current);while(a.MoveNext())};c.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;for(var b=0,a=0;a<this._length;a++)if(c==this[a]){delete this[a];b++}if(b>0)this._fixIndex();else throw new KeyNotFoundException;};c.prototype.Clear=function(){for(var a=0;a<this._length;a++)delete this[a];this._length=0};c.prototype.Contains=function(b){for(var a=0;a<this._length;a++)if(b==this[a])return true;return false};c.prototype.IndexOf=function(b){if(b===undefined)throw new InvalidArgumentException;for(var a=0;a<this._length;a++)if(b==this[a])return a;return-1};c.prototype.ElementAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this._length)throw new IndexOutOfBoundsException;return this[a]};c.prototype.Insert=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>this._length)throw new IndexOutOfBoundsException;this._makeGap(a,1);this[a]=b};c.prototype.InsertRange=function(b,e){if(b===undefined||e==undefined)throw new InvalidArgumentException;if(b<0||b>this._length)throw new IndexOutOfBoundsException;var d=a.Enumerable.CopyToArray(e);this._makeGap(b,d.length);for(var c=0;c<d.length;c++)this[c]=d[c]};c.prototype.RemoveAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this._length)throw new IndexOutOfBoundsException;delete this[a];this._fixIndex()};c.prototype.RemoveRange=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>=this._length||(b<0||b>this._length-a))throw new IndexOutOfBoundsException;for(var c=0;c<b;c++)delete this[a+c];this._fixIndex()};c.prototype.CopyTo=function(b){for(var a=0;a<this._length;a++)b.Add(this[a])};c.prototype.GetEnumerator=function(){return new b(this)};c.prototype.GetNative=function(){return this};c.prototype._fixIndex=function(){for(var c=0,b=-1,e=this._length,a=0;a<e;a++)if(this[a]===undefined&&this[a+1]===undefined)if(b>=0)continue;else b=a;else if(b>=0&&this[a]!==undefined){var d=this._removeGap(b,a-1);c+=d;e-=d;b=-1}else if(b==-1&&this[a]===undefined){var d=this._removeGap(a,a);e-=d;c+=d}if(b>-1)c+=this._length-b;this._length-=c};c.prototype._removeGap=function(c,e){for(var d=e-c+1,f=1,a=c;a<this._length;a++){this[a]=this[e+f];f++}for(var b=this._length-d;b<this._length;b++)delete this[b];return d};c.prototype._makeGap=function(b,c){for(var d={},a=0;a<this._length-b;a++){d[a]=this[b+a];delete this[b+a]}for(var a=0;a<this._length-b;a++)this[b+c+a]=d[a];this._length+=c};return c}(a.Collection);a.List=d;var b=function(){function a(a){this.Index=0;if(a==undefined||a==null)throw new InvalidArgumentException;this.List=a}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.List[this.Index]},enumerable:true,configurable:true});a.prototype.MoveNext=function(){if(!this.HasNext())return false;this.Index++;return true};a.prototype.HasNext=function(){return this.Index+1<this.List.Count};a.prototype.IsValid=function(){return this.Index<this.List.Count};a.prototype.Reset=function(){this.Index=0};return a}();a.ListEnumerator=b;var c=function(c){__extends(b,c);function b(){c.apply(this,arguments);this.Items=[]}Object.defineProperty(b.prototype,"Count",{"get":function(){return this.Items.length},enumerable:true,configurable:true});b.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;this.Items.push(a)};b.prototype.AddRange=function(b){if(b===undefined)throw new InvalidArgumentException;this.Items=this.Items.concat(a.Enumerable.CopyToArray(b))};b.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;for(var b=false,a=0;a<this.Items.length;a++)if(c==this.Items[a]){this.Items.splice(a,1);b=true}if(!b)throw new KeyNotFoundException;};b.prototype.RemoveRange=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>=this.Items.length||(b<0||b>this.Items.length-a))throw new IndexOutOfBoundsException;this.Items.splice(a,b)};b.prototype.Clear=function(){this.Items=[]};b.prototype.Contains=function(a){return this.Items.indexOf(a)>=0};b.prototype.IndexOf=function(a){if(a===undefined)throw new InvalidArgumentException;return this.Items.indexOf(a)};b.prototype.ElementAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this.Items.length)throw new IndexOutOfBoundsException;return this.Items[a]};b.prototype.Insert=function(a,b){if(a===undefined||b===undefined)throw new InvalidArgumentException;if(a<0||a>this.Items.length)throw new IndexOutOfBoundsException;this.Items.splice(a,0,b)};b.prototype.InsertRange=function(b,c){if(b===undefined||c==undefined)throw new InvalidArgumentException;if(b<0||b>this.Items.length)throw new IndexOutOfBoundsException;var e=this.Items.slice(b),d=this.Items;this.Items=d.concat(a.Enumerable.CopyToArray(c)).concat(e)};b.prototype.RemoveAt=function(a){if(a===undefined)throw new InvalidArgumentException;if(a<0||a>=this.Items.length)throw new IndexOutOfBoundsException;this.Items.splice(a,1)};b.prototype.CopyTo=function(b){for(var a=0;a<this.Items.length;a++)b.Add(this.Items[a])};b.prototype.GetEnumerator=function(){return new a.SimpleEnumerator(this.Items)};b.prototype.GetNative=function(){return this.Items};return b}(a.Collection);a.ArrayList=c})(Collections||(Collections={}));var Collections;(function(a){var g=function(c){__extends(a,c);function a(){c.apply(this,arguments);this.Items=[]}Object.defineProperty(a.prototype,"Count",{"get":function(){return this.Items.length},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Keys",{"get":function(){var a=[],b=0,c=this.Items.length;while(b<c)a[a.length]=this.Items[b].Key;return a},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Values",{"get":function(){var a=[],b=0,c=this.Items.length;while(b<c)a[a.length]=this.Items[b].Value;return a},enumerable:true,configurable:true});a.prototype.Get=function(b){var a=0,c=this.Items.length;while(a<c)if(this.Items[a].Key==b)return this.Items[a].Value;return null};a.prototype.Set=function(d,c){var a=0,e=this.Items.length;while(a<e)if(this.Items[a].Key==d)this.Items[a].Value=c;this.Add(new b(d,c))};a.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;if(a==null){this.Items.push(new b(null,null));console.warn("It probably isn't smart to add Null values to a Dictionary. Maybe you'd want to change your application to check for those kinds of values?")}else this.Items.push(a)};a.prototype.GetKey=function(b){var a=0,c=this.Items.length;while(a<c)if(this.Items[a].Value==b)return this.Items[a].Key;return null};a.prototype.Clear=function(){this.Items=[]};a.prototype.Contains=function(b){for(var a=0;a<this.Items.length;a++)if(b==this.Items[a])return true;return false};a.prototype.ContainsKey=function(b){for(var a=0;a<this.Items.length;a++)if(b==this.Items[a].Key)return true;return false};a.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;var d=false;if(c instanceof b){for(var a=0;a<this.Items.length;a++)if(this.Items[a]==c){this.Items.splice(a,1);d=true}}else for(var a=0;a<this.Items.length;a++)if(this.Items[a].Key==c){this.Items.splice(a,1);d=true}if(!d)throw new KeyNotFoundException;};a.prototype.CopyTo=function(b){for(var a=0;a<this.Items.length;a++)b.Add(this.Items[a])};a.prototype.GetNative=function(){return this.Items};a.prototype.GetEnumerator=function(){return new e(this.Items)};return a}(a.Collection);a.Dictionary=g;var f=function(c){__extends(a,c);function a(){c.apply(this,arguments);this._count=0;this.Items={}}Object.defineProperty(a.prototype,"Count",{"get":function(){return this._count},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Keys",{"get":function(){return this.Items.Keys()},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Values",{"get":function(){return _.values(this.Items)},enumerable:true,configurable:true});a.prototype.Get=function(a){return this.Items[a]};a.prototype.Set=function(a,b){if(this.Items[a]===undefined){this.Items[a]=b;this._count++}else this.Items[a]=b};a.prototype.Add=function(a){if(a===undefined)throw new InvalidArgumentException;if(a==null)console.warn("It probably isn't smart to add Null values to a Dictionary. Maybe you'd want to change your application to check for those kinds of values?");else this.Items[a.Key]=a.Value;this._count++};a.prototype.GetKey=function(b){for(var a in this.Items)if(this.Items[a]==b)return a};a.prototype.Clear=function(){this.Items={};this._count=0};a.prototype.Contains=function(a){for(var b in this.Items)if(b==a.Key&&this.Items[b]==a.Value)return true;return false};a.prototype.ContainsKey=function(a){return a in this.Items};a.prototype.Remove=function(c){if(c===undefined)throw new InvalidArgumentException;var d=false;if(c instanceof b){for(var a in this.Items)if(a==c.Key&&this.Items[a]==c.Value){delete this.Items[a];this._count--;d=true}}else for(var a in this.Items)if(this.Items[a]==c){delete this.Items[a];this._count--;d=true}if(!d)throw new KeyNotFoundException;};a.prototype.CopyTo=function(c){for(var a in this.Items)c.Add(new b(a,this.Items[a]))};a.prototype.GetNative=function(){return this.Items};a.prototype.GetEnumerator=function(){return new d(this.Items)};return a}(a.Collection);a.SearchDictionary=f;var b=function(){function a(b,a){this.Key=b;this.Value=a}return a}();a.KeyValuePair=b;var c=function(){function a(){this._index=0}Object.defineProperty(a.prototype,"Index",{"get":function(){return this._index},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Current",{"get":function(){throw new AbstractMethodException;},enumerable:true,configurable:true});a.prototype.HasNext=function(){throw new AbstractMethodException;};a.prototype.IsValid=function(){throw new AbstractMethodException;};a.prototype.MoveNext=function(){if(!this.HasNext())return false;this._index++;this.RefreshCurrent();return true};a.prototype.Reset=function(){this._index=0;this.RefreshCurrent()};a.prototype.RefreshCurrent=function(){throw new AbstractMethodException;};return a}();a.BaseDictionaryEnumerator=c;var e=function(b){__extends(a,b);function a(a){b.call(this);if(a==undefined||a==null)throw new InvalidArgumentException;this.Items=a;this.RefreshCurrent()}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.Items[this.Index]},enumerable:true,configurable:true});a.prototype.HasNext=function(){return this.Index+1<this.Items.length};a.prototype.IsValid=function(){return this.Index<this.Items.length};a.prototype.RefreshCurrent=function(){if(this.Items.length>0){this.Key=this.Current.Key;this.Value=this.Current.Value}};return a}(c);a.DictionaryEnumerator=e;var d=function(c){__extends(a,c);function a(a){c.call(this);if(a==undefined||a==null)throw new InvalidArgumentException;this.Items=a;this.Keys=_.keys(this.Items);this.RefreshCurrent()}Object.defineProperty(a.prototype,"Current",{"get":function(){return this.Keys.length>0?new b(this.Key,this.Value):undefined},enumerable:true,configurable:true});a.prototype.HasNext=function(){return!(this.Keys[this.Index+1]==undefined)};a.prototype.IsValid=function(){return!(this.Keys[this.Index]==undefined)};a.prototype.RefreshCurrent=function(){if(this.Keys.length>0){this.Key=this.Keys[this.Index];this.Value=this.Items[this.Keys[this.Index]]}};return a}(c);a.SearchDictionaryEnumerator=d})(Collections||(Collections={}));var Events;(function(b){var d=function(){function a(b,c,a){if(typeof a==="undefined")a={};this._originatingObject=b;this._eventName=c;this._data=a}Object.defineProperty(a.prototype,"EventName",{"get":function(){return this._eventName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"OriginatingObject",{"get":function(){return this._originatingObject},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Data",{"get":function(){return this._data},enumerable:true,configurable:true});a.prototype.StopPropagation=function(){this._originatingObject.StopCurrentEventPropagation()};return a}();b.ObjectEvent=d;var a=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.EventConsumers=new Collections.Dictionary;this.EventDelegates=new Collections.Dictionary;this.PropagationCanceled=false}a.prototype.Dispatch=function(c,d){var b=this;this.PropagationCanceled=false;this.EventConsumers.Count>0&&this.EventConsumers.Where(function(b){return b.Key==c||b.Key==a.WildcardEvent}).BreakableEach(function(a){if(b.PropagationCanceled==true)return false;a.Value.BreakableEach(function(a){if(b.PropagationCanceled==true)return false;a.ConsumeEvent(d)})});this.EventDelegates.Count>0&&this.PropagationCanceled==false&&this.EventDelegates.Where(function(b){return b.Key==c||b.Key==a.WildcardEvent}).BreakableEach(function(a){a.Value.BreakableEach(function(a){if(b.PropagationCanceled==true)return false;a(d)});if(b.PropagationCanceled==true){b.PropagationCanceled=false;return false}})};a.prototype.Consume=function(d,b){var c=this;if(d.ConsumeEvent==undefined)throw new Error("Invalid consumer object given");if(b==undefined)b=[a.WildcardEvent];_.each(b,function(a){!c.EventConsumers.ContainsKey(a)&&c.EventConsumers.Set(a,new Collections.List);c.EventConsumers.Get(a).Add(d)})};a.prototype.Starve=function(a,b){var c=this;if(b==undefined)this.EventConsumers.Each(function(b){b.Value.Remove(a)});else _.each(b,function(b){c.EventConsumers.ContainsKey(b)&&c.EventConsumers.Get(b).Remove(a)})};a.prototype.Attach=function(d,b){var c=this;if(b==undefined)b=[a.WildcardEvent];_.each(b,function(a){!c.EventDelegates.ContainsKey(a)&&c.EventDelegates.Set(a,new Collections.List);c.EventDelegates.Get(a).Add(d)})};a.prototype.Detach=function(){throw new NotImplementedException;};a.prototype.On=function(a,b){var c=a.split(" ");this.Attach(b,c)};a.prototype.StopCurrentEventPropagation=function(){this.PropagationCanceled=true};a.WildcardEvent="*";return a}(BaseObject);b.EventDispatcher=a;function c(b){b.prototype.InitEventSystem=function(){this.EventConsumers=new Collections.Dictionary;this.EventDelegates=new Collections.Dictionary;this.PropagationCanceled=false};b.prototype.Dispatch=a.prototype.Dispatch;b.prototype.Consume=a.prototype.Consume;b.prototype.Starve=a.prototype.Starve;b.prototype.Attach=a.prototype.Attach;b.prototype.Detach=a.prototype.Detach;b.prototype.On=a.prototype.On;b.prototype.StopCurrentEventPropagation=a.prototype.StopCurrentEventPropagation}b.CopyEventDispatcherPrototype=c})(Events||(Events={}));var Model;(function(c){var a=function(b){__extends(a,b);function a(){b.apply(this,arguments)}return a}(Events.ObjectEvent),b=function(c){__extends(b,c);function b(b,a){if(typeof a==="undefined")a={};c.call(this);this._modelAttributes=[];this._modelValues=null;this._modelDefaults=null;this._hasFetched=false;this._modelUrl=b;if(a!==undefined&&a!==null)this._options=a;else this._options={}}b.prototype.RefreshModelProperties=function(b){var a=this;if(typeof b==="undefined")b=[];this._modelDefaults={};this._modelValues={};var d=["EventConsumers","EventDelegates","PropagationCanceled"].concat(b),c=Object.getOwnPropertyNames(this);_.each(c,function(b){if(b.substr(0,1)!="_"&&d.indexOf(b)==-1){a._modelDefaults[b]=a[b];a._modelValues[b]=a[b];Object.defineProperty(a,b,{"get":function(){return a.TryGet.bind(a)(b)},"set":function(c){a.Set.bind(a)(b,c)},enumerable:true,configurable:true})}});console.log(this._modelValues)};b.prototype.GetID=function(){return this._options.idProperty==undefined?_.contains(this._modelAttributes,"id")?this._modelValues.id:null:this.SafeGet(this._options.idProperty)};b.prototype.SafeGet=function(a){return this._modelValues[a]?this._modelValues[a]:this._modelValues[this.UCFirst(a)]!==undefined?this._modelValues[this.UCFirst(a)]:undefined};b.prototype.Get=function(a){this._modelValues==null&&this.Fetch(false);return this._modelValues[a]?this._modelValues[a]:this._modelValues[this.UCFirst(a)]!==undefined?this._modelValues[this.UCFirst(a)]:undefined};b.prototype.TryGet=function(a){this._modelValues==null&&this.Fetch(false);if(this._modelValues[a])return this._modelValues[a];else if(this._modelValues[this.UCFirst(a)]!==undefined)return this._modelValues[this.UCFirst(a)];else throw new Error('Attribute "'+this.UCFirst(a)+"\" doesn't exist on ViewModel "+this.GetType().Name);};b.prototype.AsyncGetAttributes=function(a,b){var c=this;if(this._modelValues==null)this.Fetch(true,null,function(){b(_.pick(c._modelValues,a))});else b(_.pick(this._modelValues,a))};b.prototype.Set=function(c,d,b){if(typeof b==="undefined")b=false;b!=true&&this.Dispatch("set",new a(this,"set",{name:c,oldValue:this._modelValues[c],newValue:d}));this._modelValues[c]=d;b!=true&&this.Dispatch("change",new a(this,"change",this._modelValues))};b.prototype.Fetch=function(d,c,e){var b=this;if(typeof d==="undefined")d=true;if(d===false){console.log("Fetching model "+this.GetType().Name+" synchronously from "+this._modelUrl);$.ajax({dataType:"json",url:this._modelUrl,async:false,data:c&&c.data?_.merge({id:this.GetID()},c.data):{id:this.GetID()},success:function(c){b._hasFetched=true;b._modelValues=c;b.Dispatch("fetch",new a(b,"fetch",b._modelValues));b.Dispatch("change",new a(b,"change",b._modelValues))}})}else if(d===true){console.log("Fetching model "+this.GetType().Name+" synchronously from "+this._modelUrl);jQuery.getJSON(this._modelUrl,c&&c.data?_.merge({id:this.GetID()},c.data):{id:this.GetID()},function(c){b._hasFetched=true;b._modelValues=c;b.Dispatch("fetch",new a(b,"fetch",b._modelValues));b.Dispatch("change",new a(b,"change",b._modelValues));e(b)})}};b.prototype.Save=function(){throw new Error("Not implemented");};b.prototype.Sync=function(){throw new Error("Not implemented");};b.prototype.ToObject=function(){return jQuery.extend({},this._modelValues)};b.prototype.UCFirst=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return b}(Events.EventDispatcher);c.ViewModel=b})(Model||(Model={}));var Panels;(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this._panelId=-1;this._panelName=null;this._panelId=a._panelCnt++;this._panelElement=jQuery('<div class="view-panel" id="'+this.PanelName+'">');this._contentElement=this._panelElement}Object.defineProperty(a.prototype,"PanelName",{"get":function(){return this._panelName?this._panelName:"panel"+this._panelId},"set":function(a){this._panelName=a;this.PanelElement.attr("id",a)},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PanelSeqId",{"get":function(){return this._panelId},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PanelElement",{"get":function(){return this._panelElement},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"ContentElement",{"get":function(){return this._contentElement},enumerable:true,configurable:true});a.prototype.Render=function(){this.Renderer()};a.prototype.Renderer=function(){throw new AbstractMethodException;};a.prototype.withTemplate=function(b,a){TemplateFactory.WithTemplate(b,a.bind(this))};a.prototype.GetTemplate=function(a){return TemplateFactory.GetTemplate(a)};a._panelCnt=0;return a}(BaseObject);a.Panel=b})(Panels||(Panels={}));var Panels;(function(a){var c=function(b){__extends(a,b);function a(){b.call(this);this.Panels={};this.PanelElement.addClass("view-panel-group")}a.prototype.AddPanel=function(a){this.Panels[a.PanelName]=a;this.ContentElement.append(a.PanelElement)};a.prototype.DetachPanel=function(a){if(this.Panels[a]===undefined)throw new UnknownPanelException;this.Panels[a].PanelElement.detach();var b=this.Panels[a];delete this.Panels[a];return b};a.prototype.GetPanel=function(a){if(this.Panels[a]===undefined)throw new UnknownPanelException;return this.Panels[a]};a.prototype.GetTypedPanel=function(a){return this.GetPanel(a)};a.prototype.GetPanelsByType=function(c){var a=[];for(var b in this.Panels)if(b instanceof c)a[a.length]=b;return a};a.prototype.HasPanel=function(a){return this.Panels[a]!==undefined};return a}(a.Panel);a.PanelGroup=c;var b=function(){function a(){}a.IsPanelAttachable=function(a){return a.PanelElement.parent().length==0};return a}();a.PanelGroupHelper=b})(Panels||(Panels={}));var UnknownPanelException=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.name="UnknownPanelException";this.message="The given panel is not registred with this group or by that name."}return a}(KeyNotFoundException),Panels;(function(b){var a=function(b){__extends(a,b);function a(){b.apply(this,arguments);this.EventConsumers=new Collections.Dictionary;this.EventDelegates=new Collections.Dictionary;this.PropagationCanceled=false}a.prototype.Dispatch=function(){throw new Error("Prototype copying failed.");};a.prototype.Consume=function(){throw new Error("Prototype copying failed.");};a.prototype.Starve=function(){throw new Error("Prototype copying failed.");};a.prototype.Attach=function(){throw new Error("Prototype copying failed.");};a.prototype.Detach=function(){throw new Error("Prototype copying failed.");};a.prototype.On=function(){throw new Error("Prototype copying failed.");};a.prototype.StopCurrentEventPropagation=function(){throw new Error("Prototype copying failed.");};return a}(b.Panel);b.ConsumablePanel=a;Events.CopyEventDispatcherPrototype(a)})(Panels||(Panels={}));var Panels;(function(a){var b=function(b){__extends(a,b);function a(a){b.call(this);this.RendererCallback=a}a.prototype.Render=function(){this.RendererCallback(this.ContentElement,this.PanelElement,this)};return a}(a.ConsumablePanel);a.DynamicPanel=b})(Panels||(Panels={}));var Panels;(function(a){(function(c){var b=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype.Show=function(a){_.each(this.Panels,function(b,c){if(c==a)b.PanelElement.show();else b.PanelElement.hide()})};b.prototype.Hide=function(a){_.each(this.Panels,function(c,b){b==a&&c.PanelElement.hide()})};b.prototype.Render=function(){};b.prototype.FillFromElement=function(d,c){a.LiftablePanelHelper.ReplacePanelElements(this,d);for(var b=0;b<c.length;b++)this.AddPanel(c[b].Panel)};return b}(a.PanelGroup);c.StackingPanelGroup=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}));var Panels;(function(a){var c=function(c){__extends(a,c);function a(d,a){c.call(this);b.ReplacePanelElements(this,d,a)}a.prototype.Renderer=function(){};a.prototype.FillFromElement=function(c,a){b.ReplacePanelElements(this,c,a)};return a}(a.Panel);a.LiftedPanel=c;(function(a){a[a.NotLiftable=0]="NotLiftable";a[a.Panel=1]="Panel";a[a.Group=2]="Group"})(a.LiftableElementState||(a.LiftableElementState={}));var d=a.LiftableElementState,b=function(){function b(){}b.LiftPanelFromElement=function(c){if(!c.length||c.length>1)throw new InvalidArgumentException("Expected a jQuery object with just 1 element, got more or none.");var e=c.attr(this.DataPanelType);if(e===undefined)throw new InvalidArgumentException("Expected an element with a DataGroupType tag, but the given element did not have any.");var a=c.detach(),f=this.ExtractContentElement(a),d=this.ExtractPanelConfig(a),b=a.attr("id");if(b===null||b=="")b=undefined;return{Panel:this.LiftedPanelConstructor(a,f,b,e,d.Value1),GroupConfig:d.Value2}};b.LiftPanelGroupFromElement=function(c){if(!c.length||c.length>1)throw new InvalidArgumentException("Expected a jQuery object with just 1 element, got more or none.");var g=c.attr(this.DataGroupType);if(g===undefined)throw new InvalidArgumentException("Expected an element with a DataGroupType tag, but the given element did not have any.");var a=c.detach(),d=this.ExtractContentElement(a),f=this.ExtractPanelConfig(a),b=a.attr("id");if(b===null||b=="")b=undefined;var e;if(d!=undefined)e=this.LiftAllWithPanelDataFromElement(d);else e=this.LiftAllWithPanelDataFromElement(a);return{Panel:this.LiftedGroupConstructor(a,d,b,g,f.Value1,e),GroupConfig:f.Value2}};b.LiftAllFromElement=function(c){var b=this,a=[];c.each(function(d,c){jQuery(c).children().each(function(f,d){var c=jQuery(d),e=b.IsLiftableElement(c);switch(e){case 1:a.push(b.LiftPanelFromElement(c).Panel);break;case 2:a.push(b.LiftPanelGroupFromElement(c).Panel);break;case 0:a.concat(b.LiftAllFromElement(c))}})});return a};b.LiftAllWithPanelDataFromElement=function(c){var b=this,a=[];c.each(function(d,c){jQuery(c).children().each(function(f,d){var c=jQuery(d),e=b.IsLiftableElement(c);switch(e){case 1:a.push(b.LiftPanelFromElement(c));break;case 2:a.push(b.LiftPanelGroupFromElement(c));break;case 0:a.concat(b.LiftAllWithPanelDataFromElement(c))}})});return a};b.IsLiftableElement=function(a){return a.attr(this.DataPanelType)!=undefined?1:a.attr(this.DataGroupType)!=undefined?2:0};b.ExtractPanelConfig=function(e){var d=e.attr(this.DataPanelConfig),b;if(d!=undefined&&d.length>0)b=JSON.parse(d);else b=[];var c=e.attr(this.DataGroupConfig),a;if(c!=undefined&&c.length>0)a=JSON.parse(c);else a=[];return new Collections.Pair(b,a)};b.ExtractContentElement=function(b){var a=b.find("["+this.DataElementRole+"=content]");return a.length==0?undefined:a.first()};b.LiftTypedPanelFromElement=function(a){return this.LiftPanelFromElement(a)};b.LiftedPanelConstructor=function(f,e,d,a,c){if(a!=undefined&&a.length>0){var b=this.GetPanelObjectByString(a);if(b==null){console.error('Undefined panel type set in element attribute. Given type "'+a+'" was not found and could not be instantiated.');return this._setPanelName(this.DefaultPanelConstructor(f,e,c),d)}else return this._setPanelName(new(b.bind.apply(b,[b].concat(c))),d)}else return this._setPanelName(this.DefaultPanelConstructor(f,e,c),d)};b.LiftedGroupConstructor=function(d,g,f,b,e,a){if(typeof a==="undefined")a=[];if(b!=undefined&&b.length>0){var c=this.GetGroupObjectByString(b);if(c==null){console.error('Undefined panel type set in element attribute. Given type "'+b+'" was not found and could not be instantiated.');return this._setPanelName(this.DefaultPanelGroupConstructor(d,g,e,a),f)}else{var h=this._setPanelName(new(c.bind.apply(c,[c].concat(e))),f);h.FillFromElement(d,a);return h}}else return this._setPanelName(this.DefaultPanelGroupConstructor(d,g,e,a),f)};b._setPanelName=function(b,a){if(a!=undefined)b.PanelName=a;return b};b.ReplacePanelElements=function(f,d,c){var a=f;if(d!=undefined){d.attr("id",a._panelElement.attr("id"));for(var e=a._panelElement.attr("class").split(" "),b=0;b<e.length;b++)d.addClass(e[b]);a._panelElement=d}if(c!=undefined&&d!=c)if(a._panelElement==a._contentElement)a._contentElement=c;else{for(var e=a._contentElement.attr("class").split(" "),b=0;b<e.length;b++)c.addClass(e[b]);a._contentElement=c}};b.IsLiftablePanel=function(a){return a==undefined?false:true};b.FindElementWithRole=function(b,a){return b.find("["+this.DataElementRole+"="+a+"]")};b.GetPanelObjectByString=function(c){var b;if(c.indexOf(".")>-1)b=this.ResolveObjectForPath(c);else b=a[c];return this.IsLiftablePanel(b)?b:null};b.GetGroupObjectByString=function(c){var b;if(c.indexOf(".")>-1)b=this.ResolveObjectForPath(c);else b=a.Groups[c];return this.IsLiftablePanel(b)?b:null};b.ResolveObjectForPath=function(d){try{for(var c=d.split("."),a=window,b=0;b<c.length;b++)a=a[c[b]];return a}catch(e){return undefined}};b.DataElementRole="data-element-role";b.DataPanelType="data-panel-type";b.DataGroupType="data-group-type";b.DataPanelConfig="data-panel-config";b.DataGroupConfig="data-group-config";b.DefaultPanelConstructor=function(b,a){return new c(b,a)};b.DefaultPanelGroupConstructor=function(c,e,d){var b=new a.Groups.StackingPanelGroup;b.FillFromElement(c,d);return b};return b}();a.LiftablePanelHelper=b})(Panels||(Panels={}));var Panels;(function(a){var c=function(c){__extends(a,c);function a(a,b){c.call(this);this._partialUrl=a;this._updateUrl=b;this._rendered=false;this.RenderedPartials=[]}Object.defineProperty(a.prototype,"IsRendered",{"get":function(){return this._rendered},enumerable:true,configurable:true});a.prototype.Render=function(){if(!this._rendered){this._rendered=true;this.MainRenderer()}else console.log('Render request on razor panel "'+this.PanelName+'"['+this.PanelSeqId+"] has been ignored because the panel has already been rendered, only partial update events are accepted now.")};a.prototype.ForceRerender=function(){this.MainRenderer()};a.prototype.ProcessPartialRender=function(){throw new AbstractMethodException;};a.prototype.MainRenderer=function(){var a=this;this.FetchRazor(function(b){a.ContentElement.empty();a.ContentElement.append(b);a.ContentElement.find("div[data-partialid]").each(function(d,b){var c=parseInt(b.getAttribute("data-partialid"),10);a.ProcessPartialRender(c,jQuery(b))})})};a.prototype.PartialRenderer=function(a,c){var d=this,b;if(_.contains(this.RenderedPartials,a))b=this.ContentElement.find("div[data-partialid="+a+"]");else b=this.ContentElement.append('<div class="temp-partial">');if(c===undefined)this.FetchRazor(function(c){b.replaceWith(c);d.ProcessPartialRender(a,c)},a);else{b.replaceWith(c);this.ProcessPartialRender(a,c)}};a.prototype.FetchRazor=function(b,a){if(a===undefined)jQuery.get(this._partialUrl,null,function(a){b(jQuery(a))},"html");else jQuery.get(this._partialUrl,{id:a},function(a){b(jQuery(a))},"html")};a.prototype.ConsumeEvent=function(c){var a=c;if(!(c instanceof b)){var d=this.EventMapper(c);if(d!=null)a=d;else return}if(!_.contains(this.RenderedPartials,a.PartialId))if(a.PartialHtml!==undefined)this.PartialRenderer(a.PartialId,a.PartialHtml);else console.warn("Improperly filled RazorPartialUpdateEvent was fired;",a);else if(a.PartialHtml!==undefined)this.PartialRenderer(a.PartialId,a.PartialHtml);else this.PartialRenderer(a.PartialId)};a.prototype.EventMapper=function(){return null};return a}(a.Panel);a.RazorPanel=c;var b=function(){function a(a,c,d,b){this._originatingObject=a;this._eventName=c;this._partialId=d;this._partialHtml=b}Object.defineProperty(a.prototype,"EventName",{"get":function(){return this._eventName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"OriginatingObject",{"get":function(){return this._originatingObject},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PartialId",{"get":function(){return this._partialId},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PartialHtml",{"get":function(){return this._partialHtml},enumerable:true,configurable:true});a.prototype.StopPropagation=function(){this._originatingObject.StopCurrentEventPropagation()};return a}();a.RazorPartialUpdateEvent=b})(Panels||(Panels={}));var Panels;(function(a){var b=function(b){__extends(a,b);function a(a){b.call(this);this._renderOnStateChange=a}Object.defineProperty(a.prototype,"State",{"get":function(){return this._state},"set":function(a){this._state=a;this._renderOnStateChange&&this.Render()},enumerable:true,configurable:true});return a}(a.ConsumablePanel);a.StatefullPanel=b;var c=function(b){__extends(a,b);function a(a,c){var d=this;b.call(this);this._renderOnStateChange=a;this._state=c;this._state.On("change",function(){return d.Render()})}Object.defineProperty(a.prototype,"State",{"get":function(){return this._state},"set":function(a){var b=this;this._state=a;if(this._renderOnStateChange){this.Render();this._state.On("change",function(){return b.Render()})}},enumerable:true,configurable:true});a.prototype.RenderModel=function(b,a){var c=this;if(typeof a==="undefined")a=true;if(a)this.withTemplate(b,function(a){c.ContentElement.html(a(c.State.ToObject()))});else this.GetTemplate(b)(this.State.ToObject)};return a}(a.ConsumablePanel);a.ModelPanel=c})(Panels||(Panels={}));var Panels;(function(a){var b=function(b){__extends(a,b);function a(a){b.call(this);this._rendered=false;this._state=a;this._state.On("change",this.Render.bind(this))}Object.defineProperty(a.prototype,"State",{"get":function(){return this._state},"set":function(){throw new MethodNotAccessibleException;},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"IsRendered",{"get":function(){return this._rendered},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"ContentElement",{"get":function(){this._rendered===false&&this.Render();return this.Cast()._contentElement},enumerable:true,configurable:true});a.prototype.Render=function(){if(!this.IsRendered){this._rendered=true;this.StateRenderer()}else console.log('State change or render request on stateless panel "'+this.PanelName+'"['+this.PanelSeqId+"] has been ignored because the panel has already been rendered.")};a.prototype.StateRenderer=function(){throw new AbstractMethodException;};return a}(a.Panel);a.StatelessPanel=b})(Panels||(Panels={}));var Panels;(function(b){var a=function(b){__extends(a,b);function a(c,a){b.call(this);this._panel=c;this._group=a}Object.defineProperty(a.prototype,"PanelName",{"get":function(){return this._panel.PanelName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"QueryString",{"get":function(){return"#"+this.PanelName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"OuterElement",{"get":function(){return this._panel.PanelElement},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"InnerElement",{"get":function(){return this._panel.ContentElement},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Visibility",{"get":function(){return this._group.IsVisible(this.PanelName)},"set":function(a){if(a)this._group.Show(this.PanelName);else this._group.Hide(this.PanelName)},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Group",{"get":function(){return this._group},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"Panel",{"get":function(){return this._panel},enumerable:true,configurable:true});a.prototype.toString=function(){return this.PanelName};a.prototype.Equals=function(a){if(a===undefined)throw new NullReferenceException;return a.PanelName==this.PanelName};a.prototype.GetHashCode=function(){return this._panel.PanelSeqId};return a}(BaseObject);b.PanelReference=a})(Panels||(Panels={}));var Panels;(function(a){(function(a){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Top=2]="Top";a[a.Down=3]="Down"})(a.Side||(a.Side={}));var c=a.Side;(function(a){a[a.Forward=0]="Forward";a[a.Backward=1]="Backward";a[a.Sidewards=2]="Sidewards"})(a.Direction||(a.Direction={}));var b=a.Direction})(a.Viewport||(a.Viewport={}));var b=a.Viewport})(Panels||(Panels={}));var Panels;(function(a){(function(b){var a=function(b){__extends(a,b);function a(a){if(typeof a==="undefined")a=0;b.call(this);this.maximalVisibleCount=a;this.References=new Collections.List}a.prototype.EachRef=function(a){this.References.Each(function(b){return a(b.Reference,b.Visible)})};a.prototype.AttachRef=function(a){this.References.Add({Reference:a,Visible:false})};a.prototype.DetachRef=function(a){this.References.RemoveAll(function(b){return b.Reference.Equals(a)})};a.prototype.HasRef=function(a){return this.References.Any(function(b){return b.Reference.Equals(a)})};a.prototype.HasRefByName=function(a){return this.References.Any(function(b){return b.Reference.PanelName==a})};a.prototype.GetRefByName=function(a){try{return this.References.First(function(b){return b.Reference.PanelName==a}).Reference}catch(b){console.warn(b);throw new KeyNotFoundException("Panel reference not found.");}};a.prototype.GetRefsByPanelType=function(a){return this.References.Select(function(a){return a.Reference.Panel}).Where(function(b){return b instanceof a}).ToArray()};a.prototype.PositionOfRef=function(a){return this.References.IndexOfFirst(function(b){return b.Reference.Equals(a)})};a.prototype.MoveBack=function(c){var a=this.PositionOfRef(c),b=this.References.ElementAt(a);this.References.RemoveAt(a);this.References.Insert(a-1,b)};a.prototype.MoveForward=function(c){var a=this.PositionOfRef(c),b=this.References.ElementAt(a);this.References.RemoveAt(a);this.References.Insert(a+1,b)};a.prototype.MoveTo=function(d,a){if(a>this.References.Count)throw new Error("ReferenceManager; Index out of bounds.");var b=this.PositionOfRef(d),c=this.References.ElementAt(b);this.References.RemoveAt(b);this.References.Insert(a,c)};a.prototype.GetVisible=function(){return this.References.Where(function(a){return a.Visible===true}).Select(function(a){return a.Reference})};a.prototype.IsVisible=function(a){return;this.References.FirstOrDefault({Reference:null,Visible:null},function(b){return b.Reference.Equals(a)}).Visible};a.prototype.SetVisibility=function(b,a){try{this.References.First(function(a){return a.Reference.Equals(b)}).Visible=a}catch(c){console.warn(c)}};a.prototype.SetVisibilityAll=function(a){this.References.Each(function(b){return b.Visible=a})};a.prototype.GetCurrentState=function(){var a=0;return this.References.Select(function(b){return{Visibility:b.Visible,Reference:b.Reference,Position:b.Visible?a++:null}})};a.prototype.TrackChanges=function(c,a){var b=this.GetCurrentState();c();if(b.CountAll()!=this.References.Count)throw new RuntimeException("Sorry I cannot track changes when refs are detached or atached.");var d=0;return this.References.Select(function(e){var c=b.First(function(a){return a.Reference.Equals(e.Reference)}),f=e.Visible?d++:null,g={Reference:e.Reference,Visibility:e.Visible,Position:f,Changed:c.Position!=f||c.Visibility!=e.Visible,PreviousPosition:c.Position,PreviousVisibility:c.Visibility,Moves:c.Position-f,MovementDirection:f>c.Position?0:1,AnimationDirection:null};a!=null&&a(g);return g})};return a}(BaseObject);b.ReferenceManager=a})(a.Utils||(a.Utils={}));var b=a.Utils})(Panels||(Panels={}));var Panels;(function(a){(function(a){(function(a){a[a.Horizontal=0]="Horizontal";a[a.Vertical=1]="Vertical"})(a.Orientation||(a.Orientation={}));var c=a.Orientation,b=function(){function a(b,a){if(typeof b==="undefined")b=0;if(typeof a==="undefined")a=false;this.ViewportOrientation=b;this.AnimateInitialState=a;this.AnimationDuration=300;this.AnimationEasing="linear"}a.prototype.SetElement=function(c){var b=this.ViewportOrientation==0?a.ViewportClassHorizontal:a.ViewportClassVertical;this.Element!=null&&this.Element.removeClass(b);this.Element=c;this.Element.addClass(b)};a.prototype.Attach=function(a){this.Element.append(a.OuterElement.hide())};a.prototype.Detach=function(a){a.OuterElement.show().detach()};a.prototype.IsAttached=function(a){return a.OuterElement.parent().attr("id")==this.Element.attr("id")};a.prototype.Arrange=function(b){var a=this,c=b.CountAll(function(a){return a.PreviousVisibility==true}),d=b.CountAll(function(a){return a.Visibility==true}),e=b.First(function(a){return a.Visibility==true}),f=b.Last(function(a){return a.Visibility==true});b.Each(function(b){var f=100/c,h=f*b.PreviousPosition,e=100/d,g=e*b.Position;if(b.Changed||c!=d)if(b.PreviousVisibility!=b.Visibility)if(b.Visibility==true){b.Reference.OuterElement.css({left:g+"%",top:"-100%",width:e+"%"}).show();b.Reference.OuterElement.animate({top:"0%"},{duration:a.AnimationDuration,easing:a.AnimationEasing})}else b.Reference.OuterElement.animate({top:"100%"},{complete:function(){b.Reference.OuterElement.hide()},duration:a.AnimationDuration,easing:a.AnimationEasing});else if(b.Visibility==true)b.Reference.OuterElement.css({left:h+"%",width:f+"%"}).animate({left:g+"%",width:e+"%"},{duration:a.AnimationDuration,easing:a.AnimationEasing});else b.Reference.OuterElement.hide()})};a.prototype.ArrangeInitial=function(b){var a=this,c=b.CountAll(function(a){return a.Visibility==true});b.Each(function(b){var d=100/c,e=d*b.Position;if(a.AnimateInitialState&&b.Visibility==true){b.Reference.OuterElement.css({left:e+"%",top:"-100%",width:d+"%"}).show();b.Reference.OuterElement.animate({top:"0%"},{duration:a.AnimationDuration,easing:a.AnimationEasing})}else if(b.Visibility==true)b.Reference.OuterElement.css({left:e+"%",width:d+"%"}).show();else b.Reference.OuterElement.hide()})};a.prototype.GetAnimationDirectionProvider=function(){return null};a.ViewportClassHorizontal="tiling-viewport-horizontal";a.ViewportClassVertical="tiling-viewport-vertical";return a}();a.TilingViewportManager=b})(a.Viewport||(a.Viewport={}));var b=a.Viewport})(Panels||(Panels={}));var Panels;(function(a){(function(c){var b=function(c){__extends(b,c);function b(){c.call(this);this.TabsListElement=jQuery("<ul>");this.PanelElement.append(this.TabsListElement);this.ContentElement=jQuery("<div>");this.PanelElement.append(this.ContentElement)}b.prototype.AddPanel=function(a){this.AddTab(a,a.PanelName)};b.prototype.AddTab=function(a){var b=this;c.prototype.AddPanel.call(this,a);this.TabsListElement.append(jQuery('<li data-panelid="'+a.PanelSeqId+'">'+a.PanelName+"</li>").click(function(){return b.Show(a.PanelName)}))};b.prototype.SetLabel=function(a,b){this.FindTabByName(a).text(b)};b.prototype.Show=function(a){c.prototype.Show.call(this,a);this.TabsListElement.find("li.active").removeClass("active");this.FindTabByName(a).addClass("active")};b.prototype.FindTabByName=function(a){return this.TabsListElement.find("li[data-panelid="+this.Panels[a].PanelSeqId+"]")};b.prototype.ShowTabs=function(){this.TabsListElement.show()};b.prototype.HideTabs=function(){this.TabsListElement.hide()};b.prototype.Render=function(){_.each(this.Panels,function(a){a.Render()})};b.prototype.FillFromElement=function(e,f){var b=this;if(_.size(this.Panels)>0)throw new RuntimeException("Tried to fill this group after panels were already added manually. This group does not support that.");var d=a.LiftablePanelHelper.FindElementWithRole(e,"content");if(d.length==0)d=jQuery("<div>");a.LiftablePanelHelper.ReplacePanelElements(this,e,d);this.TabsListElement=e.find("ul");if(this.TabsListElement.length==0){console.log("No tab list found for lifting panel from DOM, proceeded to make a tablist ourselves.");this.TabsListElement=jQuery("<ul>");this.PanelElement.prepend(this.TabsListElement);for(var g=0;g<f.length;g++)this.AddPanel(f[g].Panel)}else _.each(f,function(e){var a=e.Panel;c.prototype.AddPanel.call(b,a);var d=b.TabsListElement.find("li[data-panelid="+a.PanelSeqId+"]");if(d.length==0){d=b.TabsListElement.find("li[data-show-panel="+a.PanelName+"]");if(d.length==0){console.error('No tab found for panel with name "'+a.PanelName+'"!!');return}else d.attr("data-panelid",a.PanelSeqId)}d.click(function(){return b.Show(a.PanelName)})})};return b}(a.Groups.StackingPanelGroup);c.TabbedPanelGroup=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}));var Panels;(function(a){(function(d){var c=function(d){__extends(c,d);function c(f,c,b){if(typeof c==="undefined")c=true;if(typeof b==="undefined")b=0;var e=this;d.call(this);this._defaultVisibility=c;this._rendered=false;this._viewport=f;this._viewport.SetElement(this.ContentElement);this.Panels=null;this.References=new a.Utils.ReferenceManager(b);this.InitEventSystem();setTimeout(function(){e._rendered==false&&console.warn('Did you forget to render the panelgroup "'+e.PanelName+'"? It has been 6 seconds since you created it...')},6e3)}Object.defineProperty(c.prototype,"Viewport",{"get":function(){return this._viewport},"set":function(){throw new Error("By default it's not possible to change the viewport manager after the object has been created.");},enumerable:true,configurable:true});c.prototype.Render=function(){if(this._rendered==false){this._rendered=true;this._defaultVisibility==true&&this._viewport.ArrangeInitial(this.References.GetCurrentState())}this.References.GetVisible().Each(function(a){return a.Panel.Render()})};c.prototype.AddPanel=function(c){if(a.PanelGroupHelper.IsPanelAttachable(c))throw new RuntimeException("The panel given seems to already be attached to another group or structure within the dom. Please free it before adding it to another group.");var b=this.MakeReference(c);this.References.AttachRef(b);this._viewport.Attach(b);this._defaultVisibility&&this.ShowByReference(b)};c.prototype.DetachPanel=function(a){var b=this.References.GetRefByName(a);return this.DetachPanelByReference(b)};c.prototype.DetachPanelByReference=function(a){this._viewport.Detach(a);this.References.DetachRef(a);return a.Panel};c.prototype.GetPanel=function(a){return this.References.GetRefByName(a).Panel};c.prototype.GetTypedPanel=function(a){return this.References.GetRefByName(a).Panel};c.prototype.GetPanelsByType=function(a){return this.References.GetRefsByPanelType(a)};c.prototype.HasPanel=function(a){return a===undefined||a==""?false:this.References.HasRefByName(a)};c.prototype.HasPanelByReference=function(a){return a===undefined||a===null?false:this.References.HasRef(a)};c.prototype.Show=function(a){if(this.References.HasRefByName(a))this.ShowByReference(this.NameToReference(a));else throw new UnknownPanelException;};c.prototype.ShowByReference=function(a){var c=this;if(this.HasPanelByReference(a)){if(this._rendered)this._viewport.Arrange(this.References.TrackChanges(function(){c.References.SetVisibility(a,true)},this._viewport.GetAnimationDirectionProvider()));else this.References.SetVisibility(a,true);this.Dispatch("show",new b(this,"show",a))}else throw new UnknownPanelException;};c.prototype.Hide=function(a){if(this.References.HasRefByName(a))this.HideByReference(this.NameToReference(a));else throw new UnknownPanelException;};c.prototype.HideByReference=function(a){var c=this;if(this.HasPanelByReference(a)){if(this._rendered)this._viewport.Arrange(this.References.TrackChanges(function(){c.References.SetVisibility(a,false)},this._viewport.GetAnimationDirectionProvider()));else this.References.SetVisibility(a,false);this.Dispatch("hide",new b(this,"hide",a))}else throw new UnknownPanelException;};c.prototype.IsVisible=function(a){return this.IsVisibleByReference(this.NameToReference(a))};c.prototype.IsVisibleByReference=function(a){return this.References.IsVisible(a)};c.prototype.Place=function(b){for(var c=[],a=0;a<b.length;a++)if(this.HasPanel(b[a]))c.push(this.NameToReference(b[a]));else throw new UnknownPanelException;this.PlaceByReferences(c)};c.prototype.PlaceByReferences=function(c){var a=this,d=this.References.TrackChanges(function(){a.References.SetVisibilityAll(false);for(var b=0;b<c.length;b++)if(a.References.HasRef(c[b]))a.References.SetVisibility(c[b],true);else throw new KeyNotFoundException;},this._viewport.GetAnimationDirectionProvider());this._rendered&&this._viewport.Arrange(d);d.Each(function(c){if(c.PreviousVisibility!=c.Visibility)if(c.Visibility==true)a.Dispatch("show",new b(a,"show",c.Reference));else a.Dispatch("hide",new b(a,"hide",c.Reference))})};c.prototype.NameToReference=function(a){return this.References.GetRefByName(a)};c.prototype.MakeReference=function(b){return new a.PanelReference(b,this)};c.prototype.Dispatch=function(){throw new MethodNotOverwrittenException;};c.prototype.Consume=function(){throw new MethodNotOverwrittenException;};c.prototype.Starve=function(){throw new MethodNotOverwrittenException;};c.prototype.Attach=function(){throw new MethodNotOverwrittenException;};c.prototype.Detach=function(){throw new MethodNotOverwrittenException;};c.prototype.On=function(){throw new MethodNotOverwrittenException;};c.prototype.StopCurrentEventPropagation=function(){throw new MethodNotOverwrittenException;};return c}(a.PanelGroup);d.ManagedPanelGroup=c;Events.CopyEventDispatcherPrototype(c);var b=function(){function a(a,c,b){this._originatingObject=a;this._eventName=c;this._panelReference=b}Object.defineProperty(a.prototype,"EventName",{"get":function(){return this._eventName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"OriginatingObject",{"get":function(){return this._originatingObject},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PanelName",{"get":function(){return this._panelReference.PanelName},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"PanelReference",{"get":function(){return this._panelReference},enumerable:true,configurable:true});a.prototype.StopPropagation=function(){this._originatingObject.StopCurrentEventPropagation()};return a}();d.PanelGroupVisibilityEvent=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}));var Panels;(function(a){(function(c){var b=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.CreateWithViewport=function(d){for(var c=[],b=0;b<arguments.length-1;b++)c[b]=arguments[b+1];return new a(new(Function.prototype.bind.apply(d,arguments)))};return a}(a.Groups.ManagedPanelGroup);c.ResponsivePanelGroup=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}));var Panels;(function(a){(function(c){var b=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype.Compose=function(){};return a}(a.Groups.ManagedPanelGroup);c.ComposablePanelGroup=b})(a.Groups||(a.Groups={}));var b=a.Groups})(Panels||(Panels={}))