function applyTrait(n,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){n.prototype[i]=t.prototype[i]})})}var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},BaseObject=function(){function n(){}return n.prototype.Cast=function(){return this},n.prototype.GetType=function(){if(Object.getPrototypeOf)return new ObjectType(Object.getPrototypeOf(this));try{return new ObjectType(this.__proto__.constructor)}catch(n){return console.warn("This browser does not support dynamic prototype retrieval."),undefined}},n}(),HashableObject=function(n){function t(){n.call(this);this._objectHash=t._instanceCount++}return __extends(t,n),t.prototype.GetHashCode=function(){return this._objectHash},t._instanceCount=0,t}(BaseObject),ObjectType=function(){function n(n){this.objPrototype=n}return Object.defineProperty(n.prototype,"Name",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ModuleName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"FullName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsAbstract",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.GetOwnProperties=function(){return Object.getOwnPropertyNames(this.objPrototype)},n.prototype.GetProperties=function(){return[]},n.prototype.GetMethods=function(){return[]},n}(),Exception=function(){function n(n){this.name="Exception";this.message="No message given.";n!==undefined&&(this.message=n)}return n.IgnoreOrDefault=function(n,t,i){for(var u=[],r=0;r<arguments.length-3;r++)u[r]=arguments[r+3];try{return u=[].concat(arguments).splice(2),t.apply(n,u)}catch(f){return i}},n.IgnoreAll=function(n,t){for(var r=[],i=0;i<arguments.length-2;i++)r[i]=arguments[i+2];try{r=[].concat(arguments).splice(2);t.apply(n,r)}catch(u){}},n.Ignore=function(n){try{n()}catch(t){}},n}(),Collections,Events,Model,UnknownPanelException,Panels;Exception.prototype=Error;var RuntimeException=function(n){function t(t){n.call(this,t);this.name="RuntimeException";this.message="No message given."}return __extends(t,n),t.prototype.toString=function(){return'Exception "'+this.name+'" occurred with message; '+this.message},t}(Exception),NotImplementedException=function(n){function t(){n.apply(this,arguments);this.name="NotImplementedException"}return __extends(t,n),t}(RuntimeException),AbstractMethodException=function(n){function t(){n.apply(this,arguments);this.name="AbstractMethodException";this.message="This method is an abstract stub. (As typescript does not support the abstract keyword). Please make sure this method is implemented if you get this exception."}return __extends(t,n),t}(NotImplementedException),MethodNotOverwrittenException=function(n){function t(){n.apply(this,arguments);this.name="MethodNotOverwrittenException";this.message="This method's prototype should have been overwritten with the correct function, however, somehow it wasn't"}return __extends(t,n),t}(NotImplementedException),MethodNotAccessibleException=function(n){function t(){n.apply(this,arguments);this.name="MethodNotAccessibleException"}return __extends(t,n),t}(RuntimeException),NullReferenceException=function(n){function t(){n.apply(this,arguments);this.name="NullReferenceException";this.message="Found a null'ed value, where it had expected a valid value."}return __extends(t,n),t}(RuntimeException),InvalidArgumentException=function(n){function t(){n.apply(this,arguments);this.name="InvalidArgumentException";this.message="The argument given to this method was invalid."}return __extends(t,n),t}(RuntimeException),KeyNotFoundException=function(n){function t(){n.apply(this,arguments);this.name="KeyNotFoundException";this.message="The key you gave was not found in this collection."}return __extends(t,n),t}(InvalidArgumentException),IndexOutOfBoundsException=function(n){function t(){n.apply(this,arguments);this.name="IndexOutOfBoundsException";this.message="The index given was less than 0 or larger than the length of this collection."}return __extends(t,n),t}(InvalidArgumentException),DuplicateKeyException=function(n){function t(){n.apply(this,arguments);this.name="DuplicateKeyException";this.message="The key you wanted to add already exists on this collection."}return __extends(t,n),t}(InvalidArgumentException),Guid=function(n){function t(t){n.call(this);this._guid=t}return __extends(t,n),t.prototype.CompareTo=function(n){if(n.toString()==this._guid)return 0;if(n.toString()>this._guid)return 1;if(n.toString()<this._guid)return-1;throw new Error("Error during comparing, this JS engine really sucks.");},t.prototype.toString=function(){return this._guid},t.NewGuid=function(){return new t("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)}))},t}(BaseObject),TemplateFactory=function(){function n(){}return n.WithTemplate=function(t,i){if(n.Templates[t]!==undefined)return i(n.Templates[t]);jQuery.ajax(n.ViewBasePath+t+".html",{async:!0,dataType:"text",success:function(r){n.Templates[t]=_.template(r);i(n.Templates[t])},error:function(n,t,i){return console.error("Unable to retrieve the template; ",t,i)}})},n.GetTemplate=function(t){if(n.Templates[t]!==undefined)return n.Templates[t];var i="";return jQuery.ajax(n.ViewBasePath+t+".html",{async:!1,dataType:"text",success:function(n){i=n}}),_.template(i)},n.ViewBasePath="views/",n.Templates={},n}(),Collections;(function(n){var t=function(){function n(n){if(this.Index=0,n==undefined||n==null)throw new InvalidArgumentException;this.Items=n}return Object.defineProperty(n.prototype,"Current",{get:function(){return this.Items[this.Index]},enumerable:!0,configurable:!0}),n.prototype.MoveNext=function(){return this.HasNext()?(this.Index++,!0):!1},n.prototype.HasNext=function(){return this.Index+1<this.Items.length},n.prototype.IsValid=function(){return this.Index<this.Items.length},n.prototype.Reset=function(){this.Index=0},n}();n.SimpleEnumerator=t})(Collections||(Collections={})),function(n){var u=function(n){function t(t,i){n.call(this);this.Value1=t;this.Value2=i}return __extends(t,n),t}(BaseObject),t,i,r;n.Pair=u;t=function(n){function t(t,i,r){n.call(this);this.Value1=t;this.Value2=i;this.Value3=r}return __extends(t,n),t}(BaseObject);n.Tuple=t;i=function(n){function t(t,i,r,u){n.call(this);this.Value1=t;this.Value2=i;this.Value3=r;this.Value4=u}return __extends(t,n),t}(BaseObject);n.Quadruple=i;r=function(n){function t(t,i,r,u,f){n.call(this);this.Value1=t;this.Value2=i;this.Value3=r;this.Value4=u;this.Value5=f}return __extends(t,n),t}(BaseObject);n.Pentuple=r}(Collections||(Collections={})),function(n){var t=function(){function t(){}return t.GetEnumerator=function(t){if(t==undefined)throw new InvalidArgumentException;return new n.SimpleEnumerator(t)},t}();n.ArrayHelper=t}(Collections||(Collections={})),function(n){var i=function(){function i(){}return i.prototype.Each=function(n){var t=this.GetEnumerator();if(t.Current!=undefined)do n(t.Current);while(t.MoveNext())},i.prototype.BreakableEach=function(n){var t=this.GetEnumerator();if(t.Current!=undefined)do n(t.Current,t);while(t.MoveNext())},i.prototype.Any=function(n){var t=this.GetEnumerator();if(t.Current==undefined)return!1;do if(n(t.Current))return!0;while(t.MoveNext());return!1},i.prototype.All=function(n){var t=this.GetEnumerator();if(t.Current==undefined)return!0;do if(!n(t.Current))return!1;while(t.MoveNext());return!0},i.prototype.ContainsDeep=function(n,t){var i=this.GetEnumerator();if(i.Current==undefined)return!1;do if(t(i.Current)==n)return!0;while(i.MoveNext());return!1},i.prototype.Where=function(t){var i=this.GetEnumerator(),r=new n.List;if(i.Current==undefined)return r;do t(i.Current)&&r.Add(i.Current);while(i.MoveNext());return r},i.prototype.Select=function(t){var i=this.GetEnumerator(),r=new n.List;if(i.Current==undefined)return r;do r.Add(t(i.Current));while(i.MoveNext());return r},i.prototype.GroupBy=function(t,i){var r=this.GetEnumerator(),u=new n.Dictionary,f,o,e;if(r.Current==undefined)return new n.List;do f=t(r.Current),u.ContainsKey(f)?(o=new n.List,u.Set(f,o)):u.Get(f).Add(r.Current);while(r.MoveNext());return e=new n.List,u.Each(function(n){return e.Add(i(n.Key,n.Value))}),e},i.prototype.Distinct=function(){var t=this.GetEnumerator(),i=new n.List;if(t.Current==undefined)return i;do i.Contains(t.Current)||i.Add(t.Current);while(t.MoveNext());return i},i.prototype.Except=function(t){var i=this.GetEnumerator(),r=new n.List;if(i.Current==undefined)return r;do t.Contains(i.Current)||r.Add(i.Current);while(i.MoveNext());return r},i.prototype.First=function(n){var t=this.GetEnumerator();if(n==undefined)return t.Current;do if(n(t.Current))return t.Current;while(t.MoveNext());return null},i.prototype.FirstOrDefault=function(n,t){var i=this.GetEnumerator();if(t==undefined)return i.Current;do if(t(i.Current))return i.Current;while(i.MoveNext());return n},i.prototype.Last=function(n){var i=this.GetEnumerator(),t;if(n==undefined){t=null;do t=i.Current;while(i.MoveNext());return t}t=null;do n(i.Current)&&(t=i.Current);while(i.MoveNext());return t},i.prototype.LastOrDefault=function(n,t){var r=this.GetEnumerator(),i;if(t==undefined){i=n;do i=r.Current;while(r.MoveNext());return i}i=n;do t(r.Current)&&(i=r.Current);while(r.MoveNext());return i},i.prototype.ElementAt=function(n){var t=this.GetEnumerator(),i;if(t.Current==undefined)return null;i=0;do{if(n==i)return t.Current;i++}while(t.MoveNext());return null},i.prototype.ElementAtOrDefault=function(n){var t=this.ElementAt(n);if(t==null)throw new Error("Index is invalid.");return t},i.prototype.IndexOfFirst=function(n){var t=this.GetEnumerator(),i;if(t.Current==undefined)return-1;i=0;do{if(n(t.Current))return i;i++}while(t.MoveNext());return-1},i.prototype.Min=function(n){var t=this.GetEnumerator(),i,r,u,f;if(n==undefined)if(typeof t.Current=="number")for(i=t.Current;t.MoveNext();)i>t.Current&&(i=t.Current);else throw new Error("Invalid type given, expected number. Please extract the correct value.");else{if(t.Current==undefined)return null;for(r=t.Current,u=n(t.Current);t.MoveNext();)f=n(t.Current),u>f&&(u=f,r=t.Current);return r}},i.prototype.Max=function(n){var t=this.GetEnumerator(),i,r,u,f;if(n==undefined)if(typeof t.Current=="number")for(i=t.Current;t.MoveNext();)i<t.Current&&(i=t.Current);else throw new Error("Invalid type given, expected number. Please extract the correct value.");else{if(t.Current==undefined)return null;for(r=t.Current,u=n(t.Current);t.MoveNext();)f=n(t.Current),u<f&&(u=f,r=t.Current);return r}},i.prototype.CountAll=function(n){var r=this.GetEnumerator(),i;if(n==undefined){if(this instanceof t)return this.Count;i=0;do i++;while(r.MoveNext());return i}i=0;do n(r.Current)&&i++;while(r.MoveNext());return i},i.prototype.ToList=function(){var t=this.GetEnumerator(),i=new n.List;do i.Add(t.Current);while(t.MoveNext());return i},i.prototype.ToArray=function(){for(var t=this.GetEnumerator(),n=[];t.MoveNext();)n[n.length]=t.Current;return n},i.prototype.ToDictionary=function(t,i,r){var u=this.GetEnumerator(),r;for(r==undefined&&(r=new n.Dictionary);u.MoveNext();)r.Set(t(u.Current),i(u.Current));return r},i.CopyToArray=function(n){return this.EnumerateToArray(n.GetEnumerator())},i.EnumerateToArray=function(n){var t=[];if(!n.IsValid())return t;do t.push(n.Current);while(n.MoveNext());return t},i.prototype.GetEnumerator=function(){throw new Error("This method is abstract, and should therefore be overridden by the extending class.");},i}(),t;n.Enumerable=i;t=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.Add=function(){throw new NotImplementedException;},t.prototype.Clear=function(){throw new NotImplementedException;},t.prototype.Contains=function(){throw new NotImplementedException;},t.prototype.Remove=function(){throw new NotImplementedException;},t.prototype.CopyTo=function(){throw new NotImplementedException;},t.prototype.GetNative=function(){throw new NotImplementedException;},t.prototype.RemoveAll=function(n){var t=this.GetEnumerator(),i=0;if(!t.IsValid())return i;do n(t.Current)&&(this.Remove(t.Current),i++);while(t.MoveNext());return i},t.prototype.RemoveFirst=function(n){var t=this.GetEnumerator();if(t.IsValid())do if(n(t.Current)){this.Remove(t.Current);return}while(t.MoveNext())},t}(i);n.Collection=t}(Collections||(Collections={})),function(n){var i=function(i){function r(){i.apply(this,arguments);this._length=0}return __extends(r,i),Object.defineProperty(r.prototype,"Count",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.Add=function(n){if(n===undefined)throw new InvalidArgumentException;this[this._length]=n;this._length++},r.prototype.AddRange=function(n){if(n===undefined)throw new InvalidArgumentException;var t=n.GetEnumerator();if(t.Current!=undefined)do this.Add(t.Current);while(t.MoveNext())},r.prototype.Remove=function(n){var i,t;if(n===undefined)throw new InvalidArgumentException;for(i=0,t=0;t<this._length;t++)n==this[t]&&(delete this[t],i++);if(i>0)this._fixIndex();else throw new KeyNotFoundException;},r.prototype.Clear=function(){for(var n=0;n<this._length;n++)delete this[n];this._length=0},r.prototype.Contains=function(n){for(var t=0;t<this._length;t++)if(n==this[t])return!0;return!1},r.prototype.IndexOf=function(n){if(n===undefined)throw new InvalidArgumentException;for(var t=0;t<this._length;t++)if(n==this[t])return t;return-1},r.prototype.ElementAt=function(n){if(n===undefined)throw new InvalidArgumentException;if(n<0||n>=this._length)throw new IndexOutOfBoundsException;return this[n]},r.prototype.Insert=function(n,t){if(n===undefined||t===undefined)throw new InvalidArgumentException;if(n<0||n>this._length)throw new IndexOutOfBoundsException;this._makeGap(n,1);this[n]=t},r.prototype.InsertRange=function(t,i){var u,r;if(t===undefined||i==undefined)throw new InvalidArgumentException;if(t<0||t>this._length)throw new IndexOutOfBoundsException;for(u=n.Enumerable.CopyToArray(i),this._makeGap(t,u.length),r=0;r<u.length;r++)this[r]=u[r]},r.prototype.RemoveAt=function(n){if(n===undefined)throw new InvalidArgumentException;if(n<0||n>=this._length)throw new IndexOutOfBoundsException;delete this[n];this._fixIndex()},r.prototype.RemoveRange=function(n,t){if(n===undefined||t===undefined)throw new InvalidArgumentException;if(n<0||n>=this._length||t<0||t>this._length-n)throw new IndexOutOfBoundsException;for(var i=0;i<t;i++)delete this[n+i];this._fixIndex()},r.prototype.CopyTo=function(n){for(var t=0;t<this._length;t++)n.Add(this[t])},r.prototype.GetEnumerator=function(){return new t(this)},r.prototype.GetNative=function(){return this},r.prototype._fixIndex=function(){for(var i,r=0,t=-1,u=this._length,n=0;n<u;n++)if(this[n]===undefined&&this[n+1]===undefined)if(t>=0)continue;else t=n;else t>=0&&this[n]!==undefined?(i=this._removeGap(t,n-1),r+=i,u-=i,t=-1):t==-1&&this[n]===undefined&&(i=this._removeGap(n,n),u-=i,r+=i);t>-1&&(r+=this._length-t);this._length-=r},r.prototype._removeGap=function(n,t){for(var i,u=t-n+1,f=1,r=n;r<this._length;r++)this[r]=this[t+f],f++;for(i=this._length-u;i<this._length;i++)delete this[i];return u},r.prototype._makeGap=function(n,t){for(var r={},i=0;i<this._length-n;i++)r[i]=this[n+i],delete this[n+i];for(i=0;i<this._length-n;i++)this[n+t+i]=r[i];this._length+=t},r}(n.Collection),t;n.List=i;t=function(){function n(n){if(this.Index=0,n==undefined||n==null)throw new InvalidArgumentException;this.List=n}return Object.defineProperty(n.prototype,"Current",{get:function(){return this.List[this.Index]},enumerable:!0,configurable:!0}),n.prototype.MoveNext=function(){return this.HasNext()?(this.Index++,!0):!1},n.prototype.HasNext=function(){return this.Index+1<this.List.Count},n.prototype.IsValid=function(){return this.Index<this.List.Count},n.prototype.Reset=function(){this.Index=0},n}();n.ListEnumerator=t}(Collections||(Collections={})),function(n){var r=function(n){function r(){n.apply(this,arguments);this.Items=[]}return __extends(r,n),Object.defineProperty(r.prototype,"Count",{get:function(){return this.Items.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Keys",{get:function(){for(var n=[],t=0,i=this.Items.length;t<i;)n[n.length]=this.Items[t].Key;return n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Values",{get:function(){for(var n=[],t=0,i=this.Items.length;t<i;)n[n.length]=this.Items[t].Value;return n},enumerable:!0,configurable:!0}),r.prototype.Get=function(n){for(var t=0,i=this.Items.length;t<i;)if(this.Items[t].Key==n)return this.Items[t].Value;return null},r.prototype.Set=function(n,i){for(var r=0,u=this.Items.length;r<u;)this.Items[r].Key==n&&(this.Items[r].Value=i);this.Add(new t(n,i))},r.prototype.Add=function(n){if(n===undefined)throw new InvalidArgumentException;n==null?(this.Items.push(new t(null,null)),console.warn("It probably isn't smart to add Null values to a Dictionary. Maybe you'd want to change your application to check for those kinds of values?")):this.Items.push(n)},r.prototype.GetKey=function(n){for(var t=0,i=this.Items.length;t<i;)if(this.Items[t].Value==n)return this.Items[t].Key;return null},r.prototype.Clear=function(){this.Items=[]},r.prototype.Contains=function(n){for(var t=0;t<this.Items.length;t++)if(n==this.Items[t])return!0;return!1},r.prototype.ContainsKey=function(n){for(var t=0;t<this.Items.length;t++)if(n==this.Items[t].Key)return!0;return!1},r.prototype.Remove=function(n){var r,i;if(n===undefined)throw new InvalidArgumentException;if(r=!1,n instanceof t)for(i=0;i<this.Items.length;i++)this.Items[i]==n&&(this.Items.splice(i,1),r=!0);else for(i=0;i<this.Items.length;i++)this.Items[i].Key==n&&(this.Items.splice(i,1),r=!0);if(!r)throw new KeyNotFoundException;},r.prototype.CopyTo=function(n){for(var t=0;t<this.Items.length;t++)n.Add(this.Items[t])},r.prototype.GetNative=function(){return this.Items},r.prototype.GetEnumerator=function(){return new i(this.Items)},r}(n.Collection),t,i;n.Dictionary=r;t=function(){function n(n,t){this.Key=n;this.Value=t}return n}();n.KeyValuePair=t;i=function(){function n(n){if(this._index=0,n==undefined||n==null)throw new InvalidArgumentException;this.Items=n;this.RefreshCurrent()}return Object.defineProperty(n.prototype,"Index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Current",{get:function(){return this.Items[this.Index]},enumerable:!0,configurable:!0}),n.prototype.MoveNext=function(){return this.HasNext()?(this._index++,this.RefreshCurrent(),!0):!1},n.prototype.Reset=function(){this._index=0;this.RefreshCurrent()},n.prototype.HasNext=function(){return this.Index+1<this.Items.length},n.prototype.IsValid=function(){return this.Index<this.Items.length},n.prototype.RefreshCurrent=function(){this.Items.length>0&&(this.Key=this.Current.Key,this.Value=this.Current.Value)},n}();n.DictionaryEnumerator=i}(Collections||(Collections={})),function(n){(function(t){var r=function(t){function r(){t.apply(this,arguments);this._count=0;this.Items={}}return __extends(r,t),Object.defineProperty(r.prototype,"Count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Keys",{get:function(){return this.Items.Keys()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Values",{get:function(){return _.values(this.Items)},enumerable:!0,configurable:!0}),r.prototype.Get=function(n){return this.Items[n]},r.prototype.Set=function(n,t){this.Items[n]===undefined?(this.Items[n]=t,this._count++):this.Items[n]=t},r.prototype.Add=function(n){if(n===undefined)throw new InvalidArgumentException;n==null?console.warn("It probably isn't smart to add Null values to a Dictionary. Maybe you'd want to change your application to check for those kinds of values?"):this.Items[n.Key]=n.Value;this._count++},r.prototype.GetKey=function(n){for(var t in this.Items)if(this.Items[t]==n)return t},r.prototype.Clear=function(){this.Items={};this._count=0},r.prototype.Contains=function(n){for(var t in this.Items)if(t==n.Key&&this.Items[t]==n.Value)return!0;return!1},r.prototype.ContainsKey=function(n){return n in this.Items},r.prototype.Remove=function(t){var r,i;if(t===undefined)throw new InvalidArgumentException;if(r=!1,t instanceof n.KeyValuePair)for(i in this.Items)i==t.Key&&this.Items[i]==t.Value&&(delete this.Items[i],this._count--,r=!0);else for(i in this.Items)this.Items[i]==t&&(delete this.Items[i],this._count--,r=!0);if(!r)throw new KeyNotFoundException;},r.prototype.CopyTo=function(t){for(var i in this.Items)t.Add(new n.KeyValuePair(i,this.Items[i]))},r.prototype.GetNative=function(){return this.Items},r.prototype.GetEnumerator=function(){return new i(this.Items)},r}(n.Collection),i;t.StringDictionary=r;i=function(){function t(n){if(this._index=0,n==undefined||n==null)throw new InvalidArgumentException;this.Items=n;this.Keys=_.keys(this.Items);this.RefreshCurrent()}return Object.defineProperty(t.prototype,"Index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Current",{get:function(){return this.Keys.length>0?new n.KeyValuePair(this.Key,this.Value):undefined},enumerable:!0,configurable:!0}),t.prototype.MoveNext=function(){return this.HasNext()?(this._index++,this.RefreshCurrent(),!0):!1},t.prototype.Reset=function(){this._index=0;this.RefreshCurrent()},t.prototype.HasNext=function(){return!(this.Keys[this.Index+1]==undefined)},t.prototype.IsValid=function(){return!(this.Keys[this.Index]==undefined)},t.prototype.RefreshCurrent=function(){this.Keys.length>0&&(this.Key=this.Keys[this.Index],this.Value=this.Items[this.Keys[this.Index]])},t}();t.StringDictionaryEnumerator=i})(n.Specialized||(n.Specialized={}));var t=n.Specialized}(Collections||(Collections={})),function(n){(function(t){var i=function(t){function i(){t.apply(this,arguments);this.Items=[]}return __extends(i,t),Object.defineProperty(i.prototype,"Count",{get:function(){return this.Items.length},enumerable:!0,configurable:!0}),i.prototype.Add=function(n){if(n===undefined)throw new InvalidArgumentException;this.Items.push(n)},i.prototype.AddRange=function(t){if(t===undefined)throw new InvalidArgumentException;this.Items=this.Items.concat(n.Enumerable.CopyToArray(t))},i.prototype.Remove=function(n){var i,t;if(n===undefined)throw new InvalidArgumentException;for(i=!1,t=0;t<this.Items.length;t++)n==this.Items[t]&&(this.Items.splice(t,1),i=!0);if(!i)throw new KeyNotFoundException;},i.prototype.RemoveRange=function(n,t){if(n===undefined||t===undefined)throw new InvalidArgumentException;if(n<0||n>=this.Items.length||t<0||t>this.Items.length-n)throw new IndexOutOfBoundsException;this.Items.splice(n,t)},i.prototype.Clear=function(){this.Items=[]},i.prototype.Contains=function(n){return this.Items.indexOf(n)>=0},i.prototype.IndexOf=function(n){if(n===undefined)throw new InvalidArgumentException;return this.Items.indexOf(n)},i.prototype.ElementAt=function(n){if(n===undefined)throw new InvalidArgumentException;if(n<0||n>=this.Items.length)throw new IndexOutOfBoundsException;return this.Items[n]},i.prototype.Insert=function(n,t){if(n===undefined||t===undefined)throw new InvalidArgumentException;if(n<0||n>this.Items.length)throw new IndexOutOfBoundsException;this.Items.splice(n,0,t)},i.prototype.InsertRange=function(t,i){if(t===undefined||i==undefined)throw new InvalidArgumentException;if(t<0||t>this.Items.length)throw new IndexOutOfBoundsException;var r=this.Items.slice(t),u=this.Items;this.Items=u.concat(n.Enumerable.CopyToArray(i)).concat(r)},i.prototype.RemoveAt=function(n){if(n===undefined)throw new InvalidArgumentException;if(n<0||n>=this.Items.length)throw new IndexOutOfBoundsException;this.Items.splice(n,1)},i.prototype.CopyTo=function(n){for(var t=0;t<this.Items.length;t++)n.Add(this.Items[t])},i.prototype.GetEnumerator=function(){return new n.SimpleEnumerator(this.Items)},i.prototype.GetNative=function(){return this.Items},i}(n.Collection);t.ArrayList=i})(n.Specialized||(n.Specialized={}));var t=n.Specialized}(Collections||(Collections={})),function(n){function r(n){n.prototype.InitEventSystem=function(){this.EventConsumers=new Collections.Dictionary;this.EventDelegates=new Collections.Dictionary;this.PropagationCanceled=!1};n.prototype.Dispatch=t.prototype.Dispatch;n.prototype.Consume=t.prototype.Consume;n.prototype.Starve=t.prototype.Starve;n.prototype.Attach=t.prototype.Attach;n.prototype.Detach=t.prototype.Detach;n.prototype.On=t.prototype.On;n.prototype.StopCurrentEventPropagation=t.prototype.StopCurrentEventPropagation}var i=function(){function n(n,t,i){typeof i=="undefined"&&(i={});this._originatingObject=n;this._eventName=t;this._data=i}return Object.defineProperty(n.prototype,"EventName",{get:function(){return this._eventName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OriginatingObject",{get:function(){return this._originatingObject},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),n.prototype.StopPropagation=function(){this._originatingObject.StopCurrentEventPropagation()},n}(),t;n.ObjectEvent=i;t=function(n){function t(){n.apply(this,arguments);this.EventConsumers=new Collections.Dictionary;this.EventDelegates=new Collections.Dictionary;this.PropagationCanceled=!1}return __extends(t,n),t.prototype.Dispatch=function(n,i){var r=this;this.PropagationCanceled=!1;this.EventConsumers.Count>0&&this.EventConsumers.Where(function(i){return i.Key==n||i.Key==t.WildcardEvent}).BreakableEach(function(n){if(r.PropagationCanceled==!0)return!1;n.Value.BreakableEach(function(n){if(r.PropagationCanceled==!0)return!1;n.ConsumeEvent(i)})});this.EventDelegates.Count>0&&this.PropagationCanceled==!1&&this.EventDelegates.Where(function(i){return i.Key==n||i.Key==t.WildcardEvent}).BreakableEach(function(n){return n.Value.BreakableEach(function(n){if(r.PropagationCanceled==!0)return!1;n(i)}),r.PropagationCanceled==!0?(r.PropagationCanceled=!1,!1):void 0})},t.prototype.Consume=function(n,i){var r=this;if(n.ConsumeEvent==undefined)throw new Error("Invalid consumer object given");i==undefined&&(i=[t.WildcardEvent]);_.each(i,function(t){r.EventConsumers.ContainsKey(t)||r.EventConsumers.Set(t,new Collections.List);r.EventConsumers.Get(t).Add(n)})},t.prototype.Starve=function(n,t){var i=this;t==undefined?this.EventConsumers.Each(function(t){t.Value.Remove(n)}):_.each(t,function(t){i.EventConsumers.ContainsKey(t)&&i.EventConsumers.Get(t).Remove(n)})},t.prototype.Attach=function(n,i){var r=this;i==undefined&&(i=[t.WildcardEvent]);_.each(i,function(t){r.EventDelegates.ContainsKey(t)||r.EventDelegates.Set(t,new Collections.List);r.EventDelegates.Get(t).Add(n)})},t.prototype.Detach=function(){throw new NotImplementedException;},t.prototype.On=function(n,t){var i=n.split(" ");this.Attach(t,i)},t.prototype.StopCurrentEventPropagation=function(){this.PropagationCanceled=!0},t.WildcardEvent="*",t}(BaseObject);n.EventDispatcher=t;n.CopyEventDispatcherPrototype=r}(Events||(Events={})),function(n){var t=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(Events.ObjectEvent),i=function(n){function i(t,i){typeof i=="undefined"&&(i={});n.call(this);this._modelAttributes=[];this._modelValues=null;this._modelDefaults=null;this._hasFetched=!1;this._modelUrl=t;this._options=i!==undefined&&i!==null?i:{}}return __extends(i,n),i.prototype.RefreshModelProperties=function(n){var t=this,i,r;typeof n=="undefined"&&(n=[]);this._modelDefaults={};this._modelValues={};i=["EventConsumers","EventDelegates","PropagationCanceled"].concat(n);r=Object.getOwnPropertyNames(this);_.each(r,function(n){n.substr(0,1)!="_"&&i.indexOf(n)==-1&&(t._modelDefaults[n]=t[n],t._modelValues[n]=t[n],Object.defineProperty(t,n,{get:function(){return t.TryGet.bind(t)(n)},set:function(i){t.Set.bind(t)(n,i)},enumerable:!0,configurable:!0}))});console.log(this._modelValues)},i.prototype.GetID=function(){return this._options.idProperty==undefined?_.contains(this._modelAttributes,"id")?this._modelValues.id:null:this.SafeGet(this._options.idProperty)},i.prototype.SafeGet=function(n){return this._modelValues[n]?this._modelValues[n]:this._modelValues[this.UCFirst(n)]!==undefined?this._modelValues[this.UCFirst(n)]:undefined},i.prototype.Get=function(n){return(this._modelValues==null&&this.Fetch(!1),this._modelValues[n])?this._modelValues[n]:this._modelValues[this.UCFirst(n)]!==undefined?this._modelValues[this.UCFirst(n)]:undefined},i.prototype.TryGet=function(n){if(this._modelValues==null&&this.Fetch(!1),this._modelValues[n])return this._modelValues[n];if(this._modelValues[this.UCFirst(n)]!==undefined)return this._modelValues[this.UCFirst(n)];throw new Error('Attribute "'+this.UCFirst(n)+"\" doesn't exist on ViewModel "+this.GetType().Name);},i.prototype.AsyncGetAttributes=function(n,t){var i=this;this._modelValues==null?this.Fetch(!0,null,function(){t(_.pick(i._modelValues,n))}):t(_.pick(this._modelValues,n))},i.prototype.Set=function(n,i,r){typeof r=="undefined"&&(r=!1);r!=!0&&this.Dispatch("set",new t(this,"set",{name:n,oldValue:this._modelValues[n],newValue:i}));this._modelValues[n]=i;r!=!0&&this.Dispatch("change",new t(this,"change",this._modelValues))},i.prototype.Fetch=function(n,i,r){var u=this;typeof n=="undefined"&&(n=!0);n===!1?(console.log("Fetching model "+this.GetType().Name+" synchronously from "+this._modelUrl),$.ajax({dataType:"json",url:this._modelUrl,async:!1,data:i&&i.data?_.merge({id:this.GetID()},i.data):{id:this.GetID()},success:function(n){u._hasFetched=!0;u._modelValues=n;u.Dispatch("fetch",new t(u,"fetch",u._modelValues));u.Dispatch("change",new t(u,"change",u._modelValues))}})):n===!0&&(console.log("Fetching model "+this.GetType().Name+" synchronously from "+this._modelUrl),jQuery.getJSON(this._modelUrl,i&&i.data?_.merge({id:this.GetID()},i.data):{id:this.GetID()},function(n){u._hasFetched=!0;u._modelValues=n;u.Dispatch("fetch",new t(u,"fetch",u._modelValues));u.Dispatch("change",new t(u,"change",u._modelValues));r(u)}))},i.prototype.Save=function(){throw new Error("Not implemented");},i.prototype.Sync=function(){throw new Error("Not implemented");},i.prototype.ToObject=function(){return jQuery.extend({},this._modelValues)},i.prototype.UCFirst=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},i}(Events.EventDispatcher);n.ViewModel=i}(Model||(Model={})),function(n){var t=function(n){function t(){n.call(this);this._panelId=-1;this._panelName=null;this._panelId=t._panelCnt++;this._panelElement=jQuery('<div class="view-panel" id="'+this.PanelName+'">');this._contentElement=this._panelElement}return __extends(t,n),Object.defineProperty(t.prototype,"PanelName",{get:function(){return this._panelName?this._panelName:"panel"+this._panelId},set:function(n){this._panelName=n;this.PanelElement.attr("id",n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PanelSeqId",{get:function(){return this._panelId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PanelElement",{get:function(){return this._panelElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ContentElement",{get:function(){return this._contentElement},enumerable:!0,configurable:!0}),t.prototype.Render=function(){this.Renderer()},t.prototype.Renderer=function(){throw new AbstractMethodException;},t.prototype.withTemplate=function(n,t){TemplateFactory.WithTemplate(n,t.bind(this))},t.prototype.GetTemplate=function(n){return TemplateFactory.GetTemplate(n)},t._panelCnt=0,t}(BaseObject);n.Panel=t}(Panels||(Panels={})),function(n){var i=function(n){function t(){n.call(this);this.Panels={};this.PanelElement.addClass("view-panel-group")}return __extends(t,n),t.prototype.AddPanel=function(n){this.Panels[n.PanelName]=n;this.ContentElement.append(n.PanelElement)},t.prototype.DetachPanel=function(n){if(this.Panels[n]===undefined)throw new UnknownPanelException;this.Panels[n].PanelElement.detach();var t=this.Panels[n];return delete this.Panels[n],t},t.prototype.GetPanel=function(n){if(this.Panels[n]===undefined)throw new UnknownPanelException;return this.Panels[n]},t.prototype.GetTypedPanel=function(n){return this.GetPanel(n)},t.prototype.GetPanelsByType=function(n){var t=[];for(var i in this.Panels)i instanceof n&&(t[t.length]=i);return t},t.prototype.HasPanel=function(n){return this.Panels[n]!==undefined},t}(n.Panel),t;n.PanelGroup=i;t=function(){function n(){}return n.IsPanelAttachable=function(n){return n.PanelElement.parent().length==0},n}();n.PanelGroupHelper=t}(Panels||(Panels={}));UnknownPanelException=function(n){function t(){n.apply(this,arguments);this.name="UnknownPanelException";this.message="The given panel is not registred with this group or by that name."}return __extends(t,n),t}(KeyNotFoundException),function(n){var t=function(n){function t(){n.apply(this,arguments);this.EventConsumers=new Collections.Dictionary;this.EventDelegates=new Collections.Dictionary;this.PropagationCanceled=!1}return __extends(t,n),t.prototype.Dispatch=function(){throw new Error("Prototype copying failed.");},t.prototype.Consume=function(){throw new Error("Prototype copying failed.");},t.prototype.Starve=function(){throw new Error("Prototype copying failed.");},t.prototype.Attach=function(){throw new Error("Prototype copying failed.");},t.prototype.Detach=function(){throw new Error("Prototype copying failed.");},t.prototype.On=function(){throw new Error("Prototype copying failed.");},t.prototype.StopCurrentEventPropagation=function(){throw new Error("Prototype copying failed.");},t}(n.Panel);n.ConsumablePanel=t;Events.CopyEventDispatcherPrototype(t)}(Panels||(Panels={})),function(n){var t=function(n){function t(t){n.call(this);this.RendererCallback=t}return __extends(t,n),t.prototype.Render=function(){this.RendererCallback(this.ContentElement,this.PanelElement,this)},t}(n.ConsumablePanel);n.DynamicPanel=t}(Panels||(Panels={})),function(n){(function(t){var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.Show=function(n){_.each(this.Panels,function(t,i){i==n?t.PanelElement.show():t.PanelElement.hide()})},i.prototype.Hide=function(n){_.each(this.Panels,function(t,i){i==n&&t.PanelElement.hide()})},i.prototype.Render=function(){},i.prototype.FillFromElement=function(t,i){n.LiftablePanelHelper.ReplacePanelElements(this,t);for(var r=0;r<i.length;r++)this.AddPanel(i[r].Panel)},i}(n.PanelGroup);t.StackingPanelGroup=i})(n.Groups||(n.Groups={}));var t=n.Groups}(Panels||(Panels={})),function(n){var i=function(n){function i(i,r){n.call(this);t.ReplacePanelElements(this,i,r)}return __extends(i,n),i.prototype.Renderer=function(){},i.prototype.FillFromElement=function(n,i){t.ReplacePanelElements(this,n,i)},i}(n.Panel),r,t;n.LiftedPanel=i,function(n){n[n.NotLiftable=0]="NotLiftable";n[n.Panel=1]="Panel";n[n.Group=2]="Group"}(n.LiftableElementState||(n.LiftableElementState={}));r=n.LiftableElementState;t=function(){function t(){}return t.LiftPanelFromElement=function(n){var r;if(!n.length||n.length>1)throw new InvalidArgumentException("Expected a jQuery object with just 1 element, got more or none.");if(r=n.attr(this.DataPanelType),r===undefined)throw new InvalidArgumentException("Expected an element with a DataGroupType tag, but the given element did not have any.");var t=n.detach(),f=this.ExtractContentElement(t),u=this.ExtractPanelConfig(t),i=t.attr("id");return(i===null||i=="")&&(i=undefined),{Panel:this.LiftedPanelConstructor(t,f,i,r,u.Value1),GroupConfig:u.Value2}},t.LiftPanelGroupFromElement=function(n){var r,e;if(!n.length||n.length>1)throw new InvalidArgumentException("Expected a jQuery object with just 1 element, got more or none.");if(r=n.attr(this.DataGroupType),r===undefined)throw new InvalidArgumentException("Expected an element with a DataGroupType tag, but the given element did not have any.");var t=n.detach(),u=this.ExtractContentElement(t),f=this.ExtractPanelConfig(t),i=t.attr("id");return(i===null||i=="")&&(i=undefined),e=u!=undefined?this.LiftAllWithPanelDataFromElement(u):this.LiftAllWithPanelDataFromElement(t),{Panel:this.LiftedGroupConstructor(t,u,i,r,f.Value1,e),GroupConfig:f.Value2}},t.LiftAllFromElement=function(n){var t=this,i=[];return n.each(function(n,r){jQuery(r).children().each(function(n,r){var u=jQuery(r),f=t.IsLiftableElement(u);switch(f){case 1:i.push(t.LiftPanelFromElement(u).Panel);break;case 2:i.push(t.LiftPanelGroupFromElement(u).Panel);break;case 0:i.concat(t.LiftAllFromElement(u))}})}),i},t.LiftAllWithPanelDataFromElement=function(n){var t=this,i=[];return n.each(function(n,r){jQuery(r).children().each(function(n,r){var u=jQuery(r),f=t.IsLiftableElement(u);switch(f){case 1:i.push(t.LiftPanelFromElement(u));break;case 2:i.push(t.LiftPanelGroupFromElement(u));break;case 0:i.concat(t.LiftAllWithPanelDataFromElement(u))}})}),i},t.IsLiftableElement=function(n){return n.attr(this.DataPanelType)!=undefined?1:n.attr(this.DataGroupType)!=undefined?2:0},t.ExtractPanelConfig=function(n){var i=n.attr(this.DataPanelConfig),r,t,u;return r=i!=undefined&&i.length>0?JSON.parse(i):[],t=n.attr(this.DataGroupConfig),u=t!=undefined&&t.length>0?JSON.parse(t):[],new Collections.Pair(r,u)},t.ExtractContentElement=function(n){var t=n.find("["+this.DataElementRole+"=content]");return t.length==0?undefined:t.first()},t.LiftTypedPanelFromElement=function(n){return this.LiftPanelFromElement(n)},t.LiftedPanelConstructor=function(n,t,i,r,u){if(r!=undefined&&r.length>0){var f=this.GetPanelObjectByString(r);return f==null?(console.error('Undefined panel type set in element attribute. Given type "'+r+'" was not found and could not be instantiated.'),this._setPanelName(this.DefaultPanelConstructor(n,t,u),i)):this._setPanelName(new(f.bind.apply(f,[f].concat(u))),i)}return this._setPanelName(this.DefaultPanelConstructor(n,t,u),i)},t.LiftedGroupConstructor=function(n,t,i,r,u,f){var e,o;return typeof f=="undefined"&&(f=[]),r!=undefined&&r.length>0?(e=this.GetGroupObjectByString(r),e==null?(console.error('Undefined panel type set in element attribute. Given type "'+r+'" was not found and could not be instantiated.'),this._setPanelName(this.DefaultPanelGroupConstructor(n,t,u,f),i)):(o=this._setPanelName(new(e.bind.apply(e,[e].concat(u))),i),o.FillFromElement(n,f),o)):this._setPanelName(this.DefaultPanelGroupConstructor(n,t,u,f),i)},t._setPanelName=function(n,t){return t!=undefined&&(n.PanelName=t),n},t.ReplacePanelElements=function(n,t,i){var r=n,f,u;if(t!=undefined){for(t.attr("id",r._panelElement.attr("id")),f=r._panelElement.attr("class").split(" "),u=0;u<f.length;u++)t.addClass(f[u]);r._panelElement=t}if(i!=undefined&&t!=i)if(r._panelElement==r._contentElement)r._contentElement=i;else{for(f=r._contentElement.attr("class").split(" "),u=0;u<f.length;u++)i.addClass(f[u]);r._contentElement=i}},t.IsLiftablePanel=function(n){return n==undefined?!1:!0},t.FindElementWithRole=function(n,t){return n.find("["+this.DataElementRole+"="+t+"]")},t.GetPanelObjectByString=function(t){var i;return i=t.indexOf(".")>-1?this.ResolveObjectForPath(t):n[t],this.IsLiftablePanel(i)?i:null},t.GetGroupObjectByString=function(t){var i;return i=t.indexOf(".")>-1?this.ResolveObjectForPath(t):n.Groups[t],this.IsLiftablePanel(i)?i:null},t.ResolveObjectForPath=function(n){var r,t,i;try{for(r=n.split("."),t=window,i=0;i<r.length;i++)t=t[r[i]];return t}catch(u){return undefined}},t.DataElementRole="data-element-role",t.DataPanelType="data-panel-type",t.DataGroupType="data-group-type",t.DataPanelConfig="data-panel-config",t.DataGroupConfig="data-group-config",t.DefaultPanelConstructor=function(n,t){return new i(n,t)},t.DefaultPanelGroupConstructor=function(t,i,r){var u=new n.Groups.StackingPanelGroup;return u.FillFromElement(t,r),u},t}();n.LiftablePanelHelper=t}(Panels||(Panels={})),function(n){var i=function(n){function i(t,i){n.call(this);this._partialUrl=t;this._updateUrl=i;this._rendered=!1;this.RenderedPartials=[]}return __extends(i,n),Object.defineProperty(i.prototype,"IsRendered",{get:function(){return this._rendered},enumerable:!0,configurable:!0}),i.prototype.Render=function(){this._rendered?console.log('Render request on razor panel "'+this.PanelName+'"['+this.PanelSeqId+"] has been ignored because the panel has already been rendered, only partial update events are accepted now."):(this._rendered=!0,this.MainRenderer())},i.prototype.ForceRerender=function(){this.MainRenderer()},i.prototype.ProcessPartialRender=function(){throw new AbstractMethodException;},i.prototype.MainRenderer=function(){var n=this;this.FetchRazor(function(t){n.ContentElement.empty();n.ContentElement.append(t);n.ContentElement.find("div[data-partialid]").each(function(t,i){var r=parseInt(i.getAttribute("data-partialid"),10);n.ProcessPartialRender(r,jQuery(i))})})},i.prototype.PartialRenderer=function(n,t){var r=this,i;i=_.contains(this.RenderedPartials,n)?this.ContentElement.find("div[data-partialid="+n+"]"):this.ContentElement.append('<div class="temp-partial">');t===undefined?this.FetchRazor(function(t){i.replaceWith(t);r.ProcessPartialRender(n,t)},n):(i.replaceWith(t),this.ProcessPartialRender(n,t))},i.prototype.FetchRazor=function(n,t){t===undefined?jQuery.get(this._partialUrl,null,function(t){n(jQuery(t))},"html"):jQuery.get(this._partialUrl,{id:t},function(t){n(jQuery(t))},"html")},i.prototype.ConsumeEvent=function(n){var i=n,r;if(!(n instanceof t))if(r=this.EventMapper(n),r!=null)i=r;else return;_.contains(this.RenderedPartials,i.PartialId)?i.PartialHtml!==undefined?this.PartialRenderer(i.PartialId,i.PartialHtml):this.PartialRenderer(i.PartialId):i.PartialHtml!==undefined?this.PartialRenderer(i.PartialId,i.PartialHtml):console.warn("Improperly filled RazorPartialUpdateEvent was fired;",i)},i.prototype.EventMapper=function(){return null},i}(n.Panel),t;n.RazorPanel=i;t=function(){function n(n,t,i,r){this._originatingObject=n;this._eventName=t;this._partialId=i;this._partialHtml=r}return Object.defineProperty(n.prototype,"EventName",{get:function(){return this._eventName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OriginatingObject",{get:function(){return this._originatingObject},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PartialId",{get:function(){return this._partialId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PartialHtml",{get:function(){return this._partialHtml},enumerable:!0,configurable:!0}),n.prototype.StopPropagation=function(){this._originatingObject.StopCurrentEventPropagation()},n}();n.RazorPartialUpdateEvent=t}(Panels||(Panels={})),function(n){var i=function(n){function t(t){n.call(this);this._renderOnStateChange=t}return __extends(t,n),Object.defineProperty(t.prototype,"State",{get:function(){return this._state},set:function(n){this._state=n;this._renderOnStateChange&&this.Render()},enumerable:!0,configurable:!0}),t}(n.ConsumablePanel),t;n.StatefullPanel=i;t=function(n){function t(t,i){var r=this;n.call(this);this._renderOnStateChange=t;this._state=i;this._state.On("change",function(){return r.Render()})}return __extends(t,n),Object.defineProperty(t.prototype,"State",{get:function(){return this._state},set:function(n){var t=this;this._state=n;this._renderOnStateChange&&(this.Render(),this._state.On("change",function(){return t.Render()}))},enumerable:!0,configurable:!0}),t.prototype.RenderModel=function(n,t){var i=this;typeof t=="undefined"&&(t=!0);t?this.withTemplate(n,function(n){i.ContentElement.html(n(i.State.ToObject()))}):this.GetTemplate(n)(this.State.ToObject)},t}(n.ConsumablePanel);n.ModelPanel=t}(Panels||(Panels={})),function(n){var t=function(n){function t(t){n.call(this);this._rendered=!1;this._state=t;this._state.On("change",this.Render.bind(this))}return __extends(t,n),Object.defineProperty(t.prototype,"State",{get:function(){return this._state},set:function(){throw new MethodNotAccessibleException;},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsRendered",{get:function(){return this._rendered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ContentElement",{get:function(){return this._rendered===!1&&this.Render(),this.Cast()._contentElement},enumerable:!0,configurable:!0}),t.prototype.Render=function(){this.IsRendered?console.log('State change or render request on stateless panel "'+this.PanelName+'"['+this.PanelSeqId+"] has been ignored because the panel has already been rendered."):(this._rendered=!0,this.StateRenderer())},t.prototype.StateRenderer=function(){throw new AbstractMethodException;},t}(n.Panel);n.StatelessPanel=t}(Panels||(Panels={})),function(n){var t=function(n){function t(t,i){n.call(this);this._panel=t;this._group=i}return __extends(t,n),Object.defineProperty(t.prototype,"PanelName",{get:function(){return this._panel.PanelName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"QueryString",{get:function(){return"#"+this.PanelName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OuterElement",{get:function(){return this._panel.PanelElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"InnerElement",{get:function(){return this._panel.ContentElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Visibility",{get:function(){return this._group.IsVisible(this.PanelName)},set:function(n){n?this._group.Show(this.PanelName):this._group.Hide(this.PanelName)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Group",{get:function(){return this._group},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Panel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.PanelName},t.prototype.Equals=function(n){if(n===undefined)throw new NullReferenceException;return n.PanelName==this.PanelName},t.prototype.GetHashCode=function(){return this._panel.PanelSeqId},t}(BaseObject);n.PanelReference=t}(Panels||(Panels={})),function(n){(function(n){var t,i;(function(n){n[n.Left=0]="Left";n[n.Right=1]="Right";n[n.Top=2]="Top";n[n.Down=3]="Down"})(n.Side||(n.Side={}));t=n.Side,function(n){n[n.Forward=0]="Forward";n[n.Backward=1]="Backward";n[n.Sidewards=2]="Sidewards"}(n.Direction||(n.Direction={}));i=n.Direction})(n.Viewport||(n.Viewport={}));var t=n.Viewport}(Panels||(Panels={})),function(n){(function(n){var t=function(n){function t(t){typeof t=="undefined"&&(t=0);n.call(this);this.maximalVisibleCount=t;this.References=new Collections.List}return __extends(t,n),t.prototype.EachRef=function(n){this.References.Each(function(t){return n(t.Reference,t.Visible)})},t.prototype.AttachRef=function(n){this.References.Add({Reference:n,Visible:!1})},t.prototype.DetachRef=function(n){this.References.RemoveAll(function(t){return t.Reference.Equals(n)})},t.prototype.HasRef=function(n){return this.References.Any(function(t){return t.Reference.Equals(n)})},t.prototype.HasRefByName=function(n){return this.References.Any(function(t){return t.Reference.PanelName==n})},t.prototype.GetRefByName=function(n){try{return this.References.First(function(t){return t.Reference.PanelName==n}).Reference}catch(t){console.warn(t);throw new KeyNotFoundException("Panel reference not found.");}},t.prototype.GetRefsByPanelType=function(n){return this.References.Select(function(n){return n.Reference.Panel}).Where(function(t){return t instanceof n}).ToArray()},t.prototype.PositionOfRef=function(n){return this.References.IndexOfFirst(function(t){return t.Reference.Equals(n)})},t.prototype.MoveBack=function(n){var t=this.PositionOfRef(n),i=this.References.ElementAt(t);this.References.RemoveAt(t);this.References.Insert(t-1,i)},t.prototype.MoveForward=function(n){var t=this.PositionOfRef(n),i=this.References.ElementAt(t);this.References.RemoveAt(t);this.References.Insert(t+1,i)},t.prototype.MoveTo=function(n,t){if(t>this.References.Count)throw new Error("ReferenceManager; Index out of bounds.");var i=this.PositionOfRef(n),r=this.References.ElementAt(i);this.References.RemoveAt(i);this.References.Insert(t,r)},t.prototype.GetVisible=function(){return this.References.Where(function(n){return n.Visible===!0}).Select(function(n){return n.Reference})},t.prototype.IsVisible=function(n){return},t.prototype.SetVisibility=function(n,t){try{this.References.First(function(t){return t.Reference.Equals(n)}).Visible=t}catch(i){console.warn(i)}},t.prototype.SetVisibilityAll=function(n){this.References.Each(function(t){return t.Visible=n})},t.prototype.GetCurrentState=function(){var n=0;return this.References.Select(function(t){return{Visibility:t.Visible,Reference:t.Reference,Position:t.Visible?n++:null}})},t.prototype.TrackChanges=function(n,t){var i=this.GetCurrentState(),r;if(n(),i.CountAll()!=this.References.Count)throw new RuntimeException("Sorry I cannot track changes when refs are detached or atached.");return r=0,this.References.Select(function(n){var u=i.First(function(t){return t.Reference.Equals(n.Reference)}),f=n.Visible?r++:null,e={Reference:n.Reference,Visibility:n.Visible,Position:f,Changed:u.Position!=f||u.Visibility!=n.Visible,PreviousPosition:u.Position,PreviousVisibility:u.Visibility,Moves:u.Position-f,MovementDirection:f>u.Position?0:1,AnimationDirection:null};return t!=null&&t(e),e})},t}(BaseObject);n.ReferenceManager=t})(n.Utils||(n.Utils={}));var t=n.Utils}(Panels||(Panels={})),function(n){(function(n){(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(n.Orientation||(n.Orientation={}));var i=n.Orientation,t=function(){function n(n,t){typeof n=="undefined"&&(n=0);typeof t=="undefined"&&(t=!1);this.ViewportOrientation=n;this.AnimateInitialState=t;this.AnimationDuration=300;this.AnimationEasing="linear"}return n.prototype.SetElement=function(t){var i=this.ViewportOrientation==0?n.ViewportClassHorizontal:n.ViewportClassVertical;this.Element!=null&&this.Element.removeClass(i);this.Element=t;this.Element.addClass(i)},n.prototype.Attach=function(n){this.Element.append(n.OuterElement.hide())},n.prototype.Detach=function(n){n.OuterElement.show().detach()},n.prototype.IsAttached=function(n){return n.OuterElement.parent().attr("id")==this.Element.attr("id")},n.prototype.Arrange=function(n){var t=this,i=n.CountAll(function(n){return n.PreviousVisibility==!0}),r=n.CountAll(function(n){return n.Visibility==!0}),u=n.First(function(n){return n.Visibility==!0}),f=n.Last(function(n){return n.Visibility==!0});n.Each(function(n){var f=100/i,o=f*n.PreviousPosition,u=100/r,e=u*n.Position;(n.Changed||i!=r)&&(n.PreviousVisibility!=n.Visibility?n.Visibility==!0?(n.Reference.OuterElement.css({left:e+"%",top:"-100%",width:u+"%"}).show(),n.Reference.OuterElement.animate({top:"0%"},{duration:t.AnimationDuration,easing:t.AnimationEasing})):n.Reference.OuterElement.animate({top:"100%"},{complete:function(){n.Reference.OuterElement.hide()},duration:t.AnimationDuration,easing:t.AnimationEasing}):n.Visibility==!0?n.Reference.OuterElement.css({left:o+"%",width:f+"%"}).animate({left:e+"%",width:u+"%"},{duration:t.AnimationDuration,easing:t.AnimationEasing}):n.Reference.OuterElement.hide())})},n.prototype.ArrangeInitial=function(n){var t=this,i=n.CountAll(function(n){return n.Visibility==!0});n.Each(function(n){var r=100/i,u=r*n.Position;t.AnimateInitialState&&n.Visibility==!0?(n.Reference.OuterElement.css({left:u+"%",top:"-100%",width:r+"%"}).show(),n.Reference.OuterElement.animate({top:"0%"},{duration:t.AnimationDuration,easing:t.AnimationEasing})):n.Visibility==!0?n.Reference.OuterElement.css({left:u+"%",width:r+"%"}).show():n.Reference.OuterElement.hide()})},n.prototype.GetAnimationDirectionProvider=function(){return null},n.ViewportClassHorizontal="tiling-viewport-horizontal",n.ViewportClassVertical="tiling-viewport-vertical",n}();n.TilingViewportManager=t})(n.Viewport||(n.Viewport={}));var t=n.Viewport}(Panels||(Panels={})),function(n){(function(t){var i=function(t){function i(){t.call(this);this.TabsListElement=jQuery("<ul>");this.PanelElement.append(this.TabsListElement);this.ContentElement=jQuery("<div>");this.PanelElement.append(this.ContentElement)}return __extends(i,t),i.prototype.AddPanel=function(n){this.AddTab(n,n.PanelName)},i.prototype.AddTab=function(n,i){var r=this;t.prototype.AddPanel.call(this,n);this.TabsListElement.append(jQuery('<li data-panelid="'+n.PanelSeqId+'">'+(i==undefined?n.PanelName:i)+"<\/li>").click(function(){return r.Show(n.PanelName)}))},i.prototype.DetachPanel=function(n){var i=this.GetPanel(n);return this.TabsListElement.find("li[data-panelid="+i.PanelSeqId+"]").remove(),t.prototype.DetachPanel.call(this,n)},i.prototype.SetLabel=function(n,t){this.FindTabByName(n).text(t)},i.prototype.Show=function(n){t.prototype.Show.call(this,n);this.TabsListElement.find("li.active").removeClass("active");this.FindTabByName(n).addClass("active")},i.prototype.FindTabByName=function(n){return this.TabsListElement.find("li[data-panelid="+this.Panels[n].PanelSeqId+"]")},i.prototype.ShowTabs=function(){this.TabsListElement.show()},i.prototype.HideTabs=function(){this.TabsListElement.hide()},i.prototype.Render=function(){_.each(this.Panels,function(n){n.Render()})},i.prototype.FillFromElement=function(i,r){var u=this,f,e;if(_.size(this.Panels)>0)throw new RuntimeException("Tried to fill this group after panels were already added manually. This group does not support that.");if(f=n.LiftablePanelHelper.FindElementWithRole(i,"content"),f.length==0&&(f=jQuery("<div>")),n.LiftablePanelHelper.ReplacePanelElements(this,i,f),this.TabsListElement=i.find("ul"),this.TabsListElement.length==0)for(console.log("No tab list found for lifting panel from DOM, proceeded to make a tablist ourselves."),this.TabsListElement=jQuery("<ul>"),this.PanelElement.prepend(this.TabsListElement),e=0;e<r.length;e++)this.AddPanel(r[e].Panel);else _.each(r,function(n){var i=n.Panel,r;if(t.prototype.AddPanel.call(u,i),r=u.TabsListElement.find("li[data-panelid="+i.PanelSeqId+"]"),r.length==0){if(r=u.TabsListElement.find("li[data-show-panel="+i.PanelName+"]"),r.length==0){console.error('No tab found for panel with name "'+i.PanelName+'"!!');return}r.attr("data-panelid",i.PanelSeqId)}r.click(function(){return u.Show(i.PanelName)})})},i}(t.StackingPanelGroup);t.TabbedPanelGroup=i})(n.Groups||(n.Groups={}));var t=n.Groups}(Panels||(Panels={})),function(n){(function(t){var r=function(t){function r(i,r,u){typeof r=="undefined"&&(r=!0);typeof u=="undefined"&&(u=0);var f=this;t.call(this);this._defaultVisibility=r;this._rendered=!1;this._viewport=i;this._viewport.SetElement(this.ContentElement);this.Panels=null;this.References=new n.Utils.ReferenceManager(u);this.InitEventSystem();setTimeout(function(){f._rendered==!1&&console.warn('Did you forget to render the panelgroup "'+f.PanelName+'"? It has been 6 seconds since you created it...')},6e3)}return __extends(r,t),Object.defineProperty(r.prototype,"Viewport",{get:function(){return this._viewport},set:function(){throw new Error("By default it's not possible to change the viewport manager after the object has been created.");},enumerable:!0,configurable:!0}),r.prototype.Render=function(){this._rendered==!1&&(this._rendered=!0,this._defaultVisibility==!0&&this._viewport.ArrangeInitial(this.References.GetCurrentState()));this.References.GetVisible().Each(function(n){return n.Panel.Render()})},r.prototype.AddPanel=function(t){if(n.PanelGroupHelper.IsPanelAttachable(t))throw new RuntimeException("The panel given seems to already be attached to another group or structure within the dom. Please free it before adding it to another group.");var i=this.MakeReference(t);this.References.AttachRef(i);this._viewport.Attach(i);this._defaultVisibility&&this.ShowByReference(i)},r.prototype.DetachPanel=function(n){var t=this.References.GetRefByName(n);return this.DetachPanelByReference(t)},r.prototype.DetachPanelByReference=function(n){return this._viewport.Detach(n),this.References.DetachRef(n),n.Panel},r.prototype.GetPanel=function(n){return this.References.GetRefByName(n).Panel},r.prototype.GetTypedPanel=function(n){return this.References.GetRefByName(n).Panel},r.prototype.GetPanelsByType=function(n){return this.References.GetRefsByPanelType(n)},r.prototype.HasPanel=function(n){return n===undefined||n==""?!1:this.References.HasRefByName(n)},r.prototype.HasPanelByReference=function(n){return n===undefined||n===null?!1:this.References.HasRef(n)},r.prototype.Show=function(n){if(this.References.HasRefByName(n))this.ShowByReference(this.NameToReference(n));else throw new UnknownPanelException;},r.prototype.ShowByReference=function(n){var t=this;if(this.HasPanelByReference(n))this._rendered?this._viewport.Arrange(this.References.TrackChanges(function(){t.References.SetVisibility(n,!0)},this._viewport.GetAnimationDirectionProvider())):this.References.SetVisibility(n,!0),this.Dispatch("show",new i(this,"show",n));else throw new UnknownPanelException;},r.prototype.Hide=function(n){if(this.References.HasRefByName(n))this.HideByReference(this.NameToReference(n));else throw new UnknownPanelException;},r.prototype.HideByReference=function(n){var t=this;if(this.HasPanelByReference(n))this._rendered?this._viewport.Arrange(this.References.TrackChanges(function(){t.References.SetVisibility(n,!1)},this._viewport.GetAnimationDirectionProvider())):this.References.SetVisibility(n,!1),this.Dispatch("hide",new i(this,"hide",n));else throw new UnknownPanelException;},r.prototype.IsVisible=function(n){return this.IsVisibleByReference(this.NameToReference(n))},r.prototype.IsVisibleByReference=function(n){return this.References.IsVisible(n)},r.prototype.Place=function(n){for(var i=[],t=0;t<n.length;t++)if(this.HasPanel(n[t]))i.push(this.NameToReference(n[t]));else throw new UnknownPanelException;this.PlaceByReferences(i)},r.prototype.PlaceByReferences=function(n){var t=this,r=this.References.TrackChanges(function(){t.References.SetVisibilityAll(!1);for(var i=0;i<n.length;i++)if(t.References.HasRef(n[i]))t.References.SetVisibility(n[i],!0);else throw new KeyNotFoundException;},this._viewport.GetAnimationDirectionProvider());this._rendered&&this._viewport.Arrange(r);r.Each(function(n){n.PreviousVisibility!=n.Visibility&&(n.Visibility==!0?t.Dispatch("show",new i(t,"show",n.Reference)):t.Dispatch("hide",new i(t,"hide",n.Reference)))})},r.prototype.NameToReference=function(n){return this.References.GetRefByName(n)},r.prototype.MakeReference=function(t){return new n.PanelReference(t,this)},r.prototype.Dispatch=function(){throw new MethodNotOverwrittenException;},r.prototype.Consume=function(){throw new MethodNotOverwrittenException;},r.prototype.Starve=function(){throw new MethodNotOverwrittenException;},r.prototype.Attach=function(){throw new MethodNotOverwrittenException;},r.prototype.Detach=function(){throw new MethodNotOverwrittenException;},r.prototype.On=function(){throw new MethodNotOverwrittenException;},r.prototype.StopCurrentEventPropagation=function(){throw new MethodNotOverwrittenException;},r}(n.PanelGroup),i;t.ManagedPanelGroup=r;Events.CopyEventDispatcherPrototype(r);i=function(){function n(n,t,i){this._originatingObject=n;this._eventName=t;this._panelReference=i}return Object.defineProperty(n.prototype,"EventName",{get:function(){return this._eventName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OriginatingObject",{get:function(){return this._originatingObject},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PanelName",{get:function(){return this._panelReference.PanelName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PanelReference",{get:function(){return this._panelReference},enumerable:!0,configurable:!0}),n.prototype.StopPropagation=function(){this._originatingObject.StopCurrentEventPropagation()},n}();t.PanelGroupVisibilityEvent=i})(n.Groups||(n.Groups={}));var t=n.Groups}(Panels||(Panels={})),function(n){(function(n){var t=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.CreateWithViewport=function(n){for(var r=[],i=0;i<arguments.length-1;i++)r[i]=arguments[i+1];return new t(new(Function.prototype.bind.apply(n,arguments)))},t}(n.ManagedPanelGroup);n.ResponsivePanelGroup=t})(n.Groups||(n.Groups={}));var t=n.Groups}(Panels||(Panels={})),function(n){(function(n){var t=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.Compose=function(){},t}(n.ManagedPanelGroup);n.ComposablePanelGroup=t})(n.Groups||(n.Groups={}));var t=n.Groups}(Panels||(Panels={}))